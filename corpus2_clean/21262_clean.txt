ndsolve mathematica macos behaving strangely piecewise right hand side following code simplified version real problem sol ndsolve x piecewise mod mod x x print x sol give correct answer time often return instead rerunning give apparently random result always give correct result mathematica figured far apparently something mod work fine piecewise unfortunately looking piecewise periodic system first segment solution varies run run using initial condition x fix problem ugly hack anyone replicate strange behavior know behind better suggested fix