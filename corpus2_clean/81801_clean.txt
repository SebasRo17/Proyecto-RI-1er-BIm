many occasion recently needed maintain complex stored procedure function broken already usually fairly subtle way occasion would call sp valid parameter plain work solution evolve framwork executes stored procedure inside transaction initializing database initial condition needed testing expected result also within transaction transaction rolled back end test worked well would call integration testing since involves integrating database call unit testing since tested individual component individual test case component since completely controlled initial state database drawn integration testing unit testing practical reason sort test bad idea integration testing anyone suggestion actual unit test stored procedure