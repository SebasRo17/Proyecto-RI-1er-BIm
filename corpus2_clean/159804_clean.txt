problem easily solved algebraic type example list succinctly expressed empty f empty empty f b f f b l num num num empty num l particular example haskell would similar language native support algebraic type turn obvious mapping oo style subtyping datatype becomes abstract base every constructor becomes concrete subclass example scala sealed abstract def map u f u u empty extends nothing override def map u f nothing u final first rest extends override def map u f u new f first rest map f val l new num new num new num empty l map num thing needed beyond naive subclassing way seal class e way make impossible add subclass hierarchy would approach problem language like c two stumbling block found trying use algebraic type c figure bottom called c e figure put empty figure way seal subclass added hierarchy would idiomatic way implement algebraic type c possible would idiomatic replacement