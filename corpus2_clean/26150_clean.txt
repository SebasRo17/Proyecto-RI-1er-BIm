trying implement lie bracket derivative nth order stumbled upon something understand illustration first define function operator f g x opt piecewise f x opt operator f g g x opt ff x x x gg x x x ask evaluation operator ff gg x x operator ff gg gg x x ff gg x x result found x x x x x x first result actually gg x x wanted third result ff gg x x second result worked expected anyone idea problem language detail know first result simply make sense right