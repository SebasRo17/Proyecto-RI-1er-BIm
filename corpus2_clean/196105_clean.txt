reading comment answer specifically write test mean broken undefined behaviour usually happens work expected c c full race condition potential reordering due weak memory model num hour ago cant reproduced written fix cant tested either putting untested live worse crime opinion num hour ago wondering good general way consistently trigger infrequently occurring production problem caused race condition test case