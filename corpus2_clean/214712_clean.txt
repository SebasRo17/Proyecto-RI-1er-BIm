currently task create user management system requirement user right role customer right group container customer subgroup customer group user assigned user access group customer assigned group customer currently looking way implement current preferred solution would based mongodb concept mongodb ancestor ancestor would added group customer selecting accessable group customer would really fast looking ancestor also updating ancestor seems pretty fast also moving group ten thousand group customer tough problem see group moved group would remove old parent ancestor tree update add new parent ancestor another separate update problem mongodb able isolate num operation therefore chance race condition exist group would moved exact time removing adding ancestor would overlap idea solve within mongo know acid conform relational db could help want lose ease use adding setting customer user adding new subdocument also scalability may easier would ldap good solution tough experience ldap another idea would regularly check update ancestor something wrong recursively checking element tough th sound clean