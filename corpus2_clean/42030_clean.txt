achieve following behavior symbol f background main goal use symbol tag abstract data structure downvalues used store information defined downvalues used bare invocation symbol expression result error message note asking design abstract data structure asking following context symbol used something like snapshot stack f fail f fail f value f value invocation existing downvalues new downvalue defined work invocation non existing downvalue fails bare invocation fails example assume stack look like start using symbol f fail f fail start using f symbol like f fails due f fail f value work assignment f value ibid x f fails due f fail x f fails due f fail x f work x value x f work x value f value work assignemnt x f work since f assigned example one actually try implement clearall f f fail f fail result information f global f f fail good want fail invoked directly without argument however default invocation non existing downvalues already problematic information fail global fail fail fail thus something wanted understand happens setdelayed command evaluates lh everything go drain right beginning since one would able define setdelayed part background edit mathematica code passed function change slighlty code input look like e g f value f f processed code read f value f f user specifies f value f f system complain know phraser level problem wonder possible arrange suitable definition f f behavior desired occurs e later f value evaluated exception occurs also following defined silently time id f f id way one define super simple data strcuture instantiated like class operated upon natural write method definition class