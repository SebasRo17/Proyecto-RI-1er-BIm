reddit hot algorithm cpdef double hot long ups long down double date hot formula match equivalent postgres score ups down order log10 max ab num num sign num elif num sign num else sign num second date num round order sign second num num brain say post calculated every request old post low score implemented mysql might guess slow slow even index think update field post every upvote downvote post let assume post posted num upvote num downvote num example get vote num day num day new post appears get num upvotes num downvote num score updating score vote num day old post new post show together theory num day old post even show front page viable implement situation