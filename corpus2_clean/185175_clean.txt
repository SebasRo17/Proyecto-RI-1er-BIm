writing unit test specify query performed interacting database see side one hand want make sure query specify performed making test brittle due formatting query edit basically would mapper interacts db layer wondering specific need interaction db edit want mock external dependency object mocking database connection specify query going performed example db connection query getmock expects query select id user foo returnvalue specified query parameter going call db connection necessary