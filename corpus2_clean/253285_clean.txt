asking implementation ruby identity map pattern potential memory leak long running server apps considering initial concept pattern initially thought intended cache database result guarantee one instance exist memory last assumption right within ddd tendency entity equality based id memory address fit perfectly memory problem however using many orms always feeling unique instance object assumption dangerous idea normally concerned object multiple instance even sync database