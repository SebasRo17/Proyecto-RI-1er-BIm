imagine one array integer value set look like testvalues set list look like lista listb listr listq length lista length listr length listb length listq number entry testvalues length lista length listb want quickly output array entry listr listq b b pair testvalues b threshold integer threshold value entry array need particular order naive way proceeding could look like outputlist length lista b b length listb b testvalues b threshold outputlist append outputlist listr listq b however quite slow much faster method using select perhaps relevant list size reality something like length lista approx length listb approx testvalues length lista length listb entry update able use position following goodindices position int x x outputlist listr listq goodindices x faster naive approach posted earlier speedup possible