php include clear reset wipe structure application requires functionality leaf two option create subclass example extends public clear dequeue everything problem approach see way test consumer subclass without relying clear defined subclass essence think way stub functionality phpunit short depending test b implement clear every consumer requires consumer application seems obviously terrible would appear testable hoping someone tell obvious way test option missed also considered wrapping see improves matter could monkey patch runkit nearly allergic aversion runkit beaten