little example exhibit successful pattern match replaceall case miss wonder assembled sage would kind offer explanation chopped original prolog emulator renan cabrera circa clearall k l j f w g b consider unordered sequence statement stored knowledge base k predicate l term f j w k l f l w l j w l j wish search knowledge base predicate l x l j x x match term predicate first cut something like k l x l j x x l f l w l j w l j work make flat orderless associative commutative setattributes flat orderless k l x l j x x w l j l f course replaceall k l x l j x x notice canonical reordering output extract answer something like case k l x l j x x w surprise question work case k l x l j x x even matchq k l x l j x false though replaceall case matchq using different pattern matcher grateful advice clue discussion etc