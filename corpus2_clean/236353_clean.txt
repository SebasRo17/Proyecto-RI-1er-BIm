library implemented c c interface c interface intent purpose way use library c num seems discourage use raw pointer neither shared ptr unique ptr suitable case understand intrusive ptr option unsure differs maintaining ref count new c wary wading boost yet new c handle memory management c num higher state spec make clear willing use feature latest spec need maintain compatibility older spec