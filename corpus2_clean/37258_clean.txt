wanting save use value variable within ndsolve without variable part equation code ode leaky integrate fire neuron express want value end refractory period updated within whenevent statement unfortunately work error message suggests know solution though sure simple one must exist trest r jm vthresh vreset v tref lif ndsolve v trest v jm r v v whenevent v vthresh v vreset trest evaluate tref v ndsolve wenset warning rule trest evaluate directly set state left hand side list state variable realise done adding another variable ode making time derivative changing value within whenevent statement rather messy potential confuse ode solver