want provide library functionality reference application fully featured posix compliant platform app library need bi directional serial port communication user keyboard user display text probably timer also want provide porting guide user library port without reference application platform may posix compliant may may support multiple thread taking care platform portability issue writing portable everything far possible providing self contained porting layer platform specific porting guide tell user replace porting layer function implementation platform however far threading model go two choice implement reference application simple single threaded program would poll keyboard poll serial port check timer status call library function needed use pthreads library app thread separate thread user serial port receive timer expiry would post message app thread processing whichever model choose explain user port platform may using different model even use single threaded implementation reference app make sure library functionality entrant put big caveat around possible consideration bear mind implementation porting guide information would want porting multi threaded single threaded system vice versa