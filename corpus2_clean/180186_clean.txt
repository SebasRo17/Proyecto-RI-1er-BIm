possible duplicate inherited 200k line spaghetti dealing legacy contains big class count num big method count num one method wrote unit test cover least specific structure mess nested loop condition like refactor still idea start actually started extracting one single end num parameter num continue extracting awful function knowing long succeed num start extracting even bigger function expose structure monster start real refactoring num extract small good function class clean coder num something completely different