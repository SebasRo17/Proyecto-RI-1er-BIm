made little library called signalr push num state need fix work safely concurrent operation easiest way lock operation thats huge performance impact library queue event subscription event come check subscription update client using signalr hold subscription num method write read subscription collection aggregate subscription client level event level two collection subscribe unsubscribe one read handle realize since library make optimum user library find good middle way use lock think handle important prioritized performance num made little unittest test concurrency fail update choose locked writes unlocked read writes didnt mutate existing state overwrite collection completely