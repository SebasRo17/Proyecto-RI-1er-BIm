compile recursive formula relies global variable global topmost compiled function unreasonable pas variable recursive subroutine one would require lot tensor copying would cause slowdown even passing globals would possible returning affected globals subroutine would tedious function must return regular tensor uniform data type consider following toy problem calculate factorial fact x module sub global sub global global sub sub x global compile without passing global sub code work nicely general mathematica interface following compiled version call mainevaluate setdelayed expression compiler cannot handle factc compile x integer module global sub sub global global sub sub x global way overcome problem