set data million datapoints real data form x z spatial coordinate x z fourth value mass element point want bin data onto integer spaced grid bin mass series specific range want number mass fall mass range point grid guess n range need n array alternatively array point list n value let start random data coords randomreal negative mass randomreal negative random range bin mass make many real data range partition union round randomreal based related question algorithm started rounding coordinate want bin onto unit bin simply used floor coordinate index floor coords case mass precision mass range specification let round roundedmass round mass based related question used gatherby collect like coordinate list gathered gatherby transpose index roundedmass first however stuck quickly bin mass gathered coordinate bin various mass range end guess array coordinate bin value corresponding number mass specified mass range mass range array probably sparse lot empty space alternatively array point list value tried use bincounts also bin mass range drop ever bin returned seems wasteful fbinmasses bincounts flatten range binnedmass parallelmap fbinmasses gathered combinedoutput transpose gathered binnedmass sortedoutput sort combinedoutput orderedq would need make sparse array maybe like going issue negative inidices seems like store list sparse array output sparsearray gathered binnedmass