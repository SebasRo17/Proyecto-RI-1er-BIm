problem following set simple entity e one set tag attached entity might arbitrary number tag total number entity near num million total number tag num initial something like e1 t1 t2 t3 tn e2 t1 t5 tk t10 t12 tl initial quite rarely updated somehow app generates logical expression tag like t1 t2 t3 t5 t6 need calculate number entity matching given expression note entity number one might totally accurate course got simple memory table lookup giving num num second execution time single thread curious efficient way handle stuff approach would recommend common algorithm structure update bit clarification requested num object actually relatively short constant string actually matter always assign id operate integer num definitely sort