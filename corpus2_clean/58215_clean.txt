trying unflatten array part ragged array sub matrix input flattened array myflatarray original dimension submatrices ragged array mydimensions word original object looked like original tried using undocumented function internal deflatten work happy crash kernel able rather inefficiently way arraytoweights myflatarray mydimensions mapindexed partition mydimensions last take myflatarray partition foldlist plus time mydimensions main problem part optimization function need called many time optimization atm slowest part also seem compiled suppose compile make sure ragged array generated neither suggestion appreciated edit turn mine bad thought though like extension structure leonid need see use future current tally answer timing using random larger result typical size need submatrices atm mydimensions seedrandom original randomreal mydimensions myflatarray flatten original timing ran result run example set result lalmeiresults table first timing lalmei arraytoweights myflatarray mydimensions range lalmei original true boxwhiskerchart quantile outlier sure best way timing go enter image description couple note image distribution mine leonid seismatica picket bit larger mr wizard kguler wreach result shoot size sub matrix get larger small example mr wizard fastest mydimensions seedrandom original randomreal mydimensions distribution case enter image description