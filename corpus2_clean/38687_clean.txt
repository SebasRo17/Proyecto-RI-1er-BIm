consider three body system g gravitational constant mass g gravitational parameter r initial location vector v initial velocity vector differential equation velocity position jmax length v evaluate table toexpression v tostring j j jmax r evaluate table toexpression r tostring j j jmax eqns list flatten table v j sum normalize r j r euclideandistance r j r delete range jmax j r j v j v j v j r j r j j jmax fns flatten table v j r j j jmax numerical integration stop two body collide sol ndsolve eqns fns vel fns sol po vel fns sol ndsolve ndsz step size effectively zero singularity stiff system suspected solution tmax parametricplot po tmax tmax plotrange imagesize plotpoints maxrecursion collision plot would like detect collision modify computation mass effect gravitational parameter velocity collided body change one body new mass becomes sum mass new velocity becomes sum velocity body new mass velocity become zero tried whenevent sol ndsolve append eqns whenevent length messagelist print tmax dist table euclideandistance r j r j j length r distdif table ab dist n dist n n length dist p position distdif min distdif p p p v p v p v p restartintegration fns vel fns sol po vel fns sol however work seems catch error properly program abort message caught catch properly