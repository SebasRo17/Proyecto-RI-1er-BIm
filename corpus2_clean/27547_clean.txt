attempting solve system relatively complicated elliptic pdes via relaxation technique particular trying solve textrm div lw vector l operator lw ij nabla w j nabla j w frac n textrm div w g ij essentially flat torus bit complication function put beginning describes geometry problem since flat torus need periodic function even fairly complicated trig function like sin x co sin z something solve minute however put standard bump function exp frac x circle around elsewhere piecewise take forever solve left open weekend still solved suggestion code important bit think vectorequationstart join vectorequation w time w time w time x w time x w x sin x w x sin w x take equation set vectorequation attache boundary condition use solving w w w soln ndsolve vectorequationstart w w w time x maxstepfraction try solve maxstepfraction necessarily problem another one running time without slightly different problem similar also given answer alpha code simple parameter given problem previous problem make close affect equation given problem something obvious know anyone suggestion make run faster edit eventually got answer mathematica within sec near something snooped around think problem may mathematica deal piecewise function near boundary circle function mathematically smooth tried find min frac e frac x x x x x positive everywhere calculation work got cdot could account observed behavior solver look min slightly smaller circle say x give reasonable answer code warning line get actually run ndsolve vecnorm vec vectorq g matrixq sqrt vec g transpose vec minkowski coord x z f x piecewise exp x x x parametrization graph x z f x x z three tangent direction x x z x x z z x z z normal vector x z x x z x z z vect x z na simplify vecnorm minkowski inside sqrt na must positive else picked bad function x z start work x z mathematica seems mess boundary piecewise part h un normalized nd fundamental form calculated using weingarter rule h table sum k coord k vect k vect j k k j h normalized nd fundamental form h na h g metric g table x z coord x z coord j j g inverse metric g simplify inverse g trace second fundamental form e mean curvature simplify tr h g gradient mean curvature call gradient grad x z affine affine simplify table sum g g j coord k g k coord j g j k coord j k metric divergence work x z coordinate worry metricdiv w vectorq g matrixq coords vectorq sqrt det g sum w sqrt det g coords metricl w vectorq g matrixq christoffel coords vectorq table sum g j w coords sum christoffel k w k k sum g w coords j sum christoffel j k w k k j metricdiv w g coord g trace free part h given simplify h g d table metricdiv g coord define w lw etc w w time x w time x w time x testw w w w lw metricl w g affine coord vectorequation table derivative testw time x metricdiv lw g coord d vectorequationstart join vectorequation w time w time w time x w time x w x sin x w x sin w x attempt solve pde set soln ndsolve vectorequationstart w w w time x maxstepfraction looking answer rw w soln pic table labeled plot rw z x row pane time time listanimate pic