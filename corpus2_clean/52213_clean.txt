example like calculate symbolic derivative frac partial partial b x b mathsf x b x b vector matrix tried clear x b n assumption x vector n real matrix n b vector real expr tensorreduce x b x b value returned tensorreduce look ok sense tensorrank tensordimensions return expected scalar use replacement rule replace x b proper sized array get expected result however write expr b get expression x b b looking expression sort guess derivative look like use code like example use tensordimensions get derivative dimension use replacement rule insert array place symbolic tensor add also tried using tensorproduct tensorcontract instead dot xmab tensorreduce x tensorcontract tensorproduct b expr tensorreduce tensorcontract tensorproduct xmab xmab give sensible looking expr think work tensorproduct tensorcontract expr b tensorcontract tensorproduct b tensorproduct x tensorproduct b x tensorcontract tensorproduct tensorproduct b tensorproduct b tensorproduct b b tensorproduct b b