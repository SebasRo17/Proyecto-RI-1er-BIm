netty based game server implementation handle num distinct packet serialization structure brevity refer packet type assigned consecutive numerical packet type unsigned byte example 0x01 0x02 etc packet extend abstract current approach netty use initial decoding layer convert tcp stream series packet object defined consisting packet length buffer containing actual packet content byte stuffing performed feed packet pipeline one deserializing processor handle set packet type semantically related example one processor might handle connection state message another may handle packet related certain aspect game per design netty usage decoder implemented protected decode ctx msg list throw exception switch msg command case command id new msg frame add break case command id new msg frame add break get structure decided upon easily create generator addition override public boolean specify packet handled decoder attaining bit appears smell looking alternative solution whose integer key map value lambda take return parsed packet seems like somewhat weird way use requires manually maintain definition index element mapping exactly match actual packet packet structure mapping already use map structure thing similar pitfall somewhat maintainable novel way approach thought yet