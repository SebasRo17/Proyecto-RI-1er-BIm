dll library c function drv dioreadbit containing structure pt dioreadbit c declaration fexport lresult ftype drv dioreadbit long ptr driverhandle lpt dioreadbit lpdioreadbit structure pt dioreadbit contains pointer state typedef struct tagpt dioreadbit ushort port ushort bit ushort far state pt dioreadbit far lpt dioreadbit lpdioreadbit pointer structure pt dioreadbit store target port number ushort port bit order number ushort bit returned bit status ushort state set port bit want read state extract information value variable state using definedllfunction mathematica tried following code digreadbit definedllfunction structlayout layoutkind sequential pack public class pt dioreadbit public ushort port public ushort bit public ushort state dllimport adsapi dll public static extern int drv dioreadbit int driverhandle ref pt dioreadbit dioreadbit ctxt context evaluate first case digreadbit sym sym typename stringdrop stringreplace ctxt pt dioreadbit structreadbit netnew typename structreadbit port structreadbit bit error digreadbit placa structreadbit structreadbit state call function via error digreadbit placa structreadbit obtain error wrong syntax