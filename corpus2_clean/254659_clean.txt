programming application embedded device using rtos support multi threading device supposed mimic older project programmed plain c without thread original project us stack start end function beginning end called throughout runtime time start called constant number identifying put stack end remove stack check top equal called different something really bad happened device recover reset feature great debugging purpose fully display function called would lovely feature multi threaded version implemented start end c using constructor destructor make handling fairly easy running single threaded work like charm anything multithreaded destroy stack scheduler switch context writing one stack would make sense basic solution mind would one start end stack thread problem know thread run better solution problem