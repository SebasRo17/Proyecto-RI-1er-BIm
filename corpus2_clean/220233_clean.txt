working small project usb device firmware started working example gradually adding new functionality testing thing however new functionality intended used final project writing learn thing concrete platform fixing unexpected problem process example test pc non functional usb port old version controlled course see two possibility change old new one example would moving loopback uart testing purpose moving sensible use uart change dma read uart cpu buffer sent use bunch statement make source configurable version compiled providing correct define latter approach recommended dividing keep every write hiding behind