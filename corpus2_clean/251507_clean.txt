working large project ton established test include reasonably complicated environment setup recently situation testing eventually condition stuff like want ability specific test many many many time figure approximate time help figure configuring waiting time test assume failure wanted via ruby could easily dump rspec result json block ease interpretation many test dump ton text sysout stream really want parse get bit end report result eventually also want ability inject flag middle test give finer grain timing information long example specific part specific test run average far attempt look like setup get configs etc repetition config rspec configuration json formatter rspec core formatters jsonformatter new config reporter rspec core reporter new json formatter config instance set reporter reporter stuff rspec core runner get result json file cool thing end problem look like ruby seem refresh environment within script default running example similar thing test shell script work fine give really ugly want work running thing way first test run fine next test crash environment variable used within test spec changed execution first test properly restarted sure fault ruby rspec anyways anyone else encounter something similar way force ruby rspec completely close old environment spin new one way running shell script