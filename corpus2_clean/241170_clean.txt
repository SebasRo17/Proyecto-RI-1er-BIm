designing layer application trying determine minimal set database operation single combined essential proper application e database left expected state every access call way determine minimal set database operation function transaction etc critical application correctly find thanks much