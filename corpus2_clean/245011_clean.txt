process several step multiple entry point get ugly pretty fast encountered facebook integration mobile app user want share something happen need several thing num session fb session start one get access token num load permission take cache num check publish permission user ask ready finally make call facebook way want functionality work ideally call something like facebook post successcallback four asynchronous operation look really messy good pattern might useful situation