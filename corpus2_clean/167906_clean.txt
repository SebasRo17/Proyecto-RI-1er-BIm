rewriting php client proxy library provides interface soap based net webservice process want add unit integration test future modification less risky work library working performs marshall call web service little reorganizing response present slightly oriented interface underlying service since library little else thin layer top web service call basic assumption really writing integration test unit test example see reason mock away web service work performed working light almost passing response service right back consumer call basic crud operation createrole createuser deleteuser finduser ct starting known database state system using test isolated testing purpose result less predictable question natural use web service call confirm result operation within test reset state application within scope test example one test might might go like public assuming global connection service client createuser user1 client finduser client deleteuser creating user making sure get id back represents user system cleaning later test rely success failure test w r number user system example however still seems pretty fragile lot dependency opportunity test fail effect result later test definitely want avoid missing option way decouple test system test really best think fairly general unit integration testing question matter using phpunit testing framework