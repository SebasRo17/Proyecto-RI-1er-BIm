question inspired one reading noticed think know happens entering expression directly kernel e typing math terminal notebook add extra complication fully understand start describe think happens interacting directly kernel correct wrong expression input first string passed preread set function expected return string get assigned instring line string parsed guess makeexpression resulting expression assigned line pre applied expression defined finally expression obtained way evaluated expression evaluated thing happen generate output outside scope question notebook thing obviously complicated start far understand notebook cell contain box string however noticed nevertheless instring set clear whether string part processing box string conversion done order set instring next notation package also involved pre evaluation process however package guess hook lower level interface work also fact notebook define private context context also somehow communicated kernel since expression different notebook sent kernel arbitrary order context need associated expression setting must thus part expression pre evaluation might thing aware therefore question exact sequence event happens submitting notebook cell far customizable behaviour concerned