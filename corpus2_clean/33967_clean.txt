function mathematica expand formulation ands or xor others logicalexpand let see example logicalexpand p q x p q p x want make thing string string regular expression contains parenthesis case mean form string let set test case expr god evil salvation mylogicalexpand expr result god evil god salvation notice result group atomic expression parenthesis regular expression know way take parser problem regular expression make complex space inside atomic expression could appear program mylogicalexpand method