struggled problem hopefully help mathematical expression currently symbol used function variable make symbol back variable expression becomes function function became expression saved matrix trying make different matrix element back function constructed matrix thanks advance including code first time contributing website imagine loop sum removed substantial amount code irrelevant pstatesalpha rankmatrix elecdipole vector number delem sumpstatesalpha alpharank predefined function alpharank alpharank alpharank alpharank jsum jsum length elecdipole jsum pstatesalpha delem sumpstatesalpha alpharank pstatesalpha appendto rankmatrix alpharank pstatesalpha note saved pstatesalpha function rankmatrix want access instance rankmatrix mathematica return expression includes lambda use function anymore