first timer finding board useful learning mathematica trying implement numerical procedure hull white trinomial tree mathematica despite using memoization finding slow get step tree first step need solve equation get alpha x proceed solving range q x j expecting fact since x step stored memory x step would done rather quickly edit q alpha get rate trying simulate rate calculate payout end tree nodevalue go back tree get value nodevalue e price payout day fails larger number step rather slow tip optimising get following message step take second timing nodevalue evaluation solve ratnz solve unable solve system inexact coefficient answer obtained solving corresponding exact system numericizing result evaluation solve ratnz solve unable solve system inexact coefficient answer obtained solving corresponding exact system numericizing result evaluation solve ratnz solve unable solve system inexact coefficient answer obtained solving corresponding exact system numericizing result evaluation general stop output solve ratnz suppressed calculation included minor change initial post also highlighted comment think code may slowing unprotect unprotect q unprotect p input tenor step code fails number bigger sigma f r r g x x zerorate dfdata p p interpolation dfdata payout r k payout r k max r k strike definition exp deltat v sigma exp deltat deltat tenor step jmax integerpart jmin jmax deltax sqrt v probmiddle j j j j j j probupward j j j j j j j probdownward j j j j j j j q k j jmin k jmax probmiddle k jmax k probdownward k k jmin probupward k jmin k jmax k j jmax k k j k jmin j k tree geometry suspect sb could improved elegant sb integer inequality lessequal less step j integer jmin j jmax ab j j ab j ab j jmax j j j jmax j jmin j jmax jmin jmax j j jmax jmax j jmin jmax j n min jmax think thing slowing bigalpha zerorate q bigalpha integer inequality lessequal less step bigalpha alpha nsolve p deltat sum q j exp g alpha j deltax deltat j n n alpha real q integer inequality lessequal less step j integer jmin j jmax q j sum q sb j k q sb j k j exp g bigalpha sb j k deltax deltat k length sb j rate integer inequality lessequal less step j integer jmin j jmax rate j g bigalpha j deltax jend min jmax step nodevalue integer inequality lessequal less step j integer jmin j jmax nodevalue j step payout rate j strike jmin j jmax probmiddle j nodevalue j nodevalue j nodevalue j jmax j probdownward j nodevalue j nodevalue j nodevalue j j jmin probupward j nodevalue j nodevalue j nodevalue j info hull white tree trying implement pg journal pdf