span useful work lot function given following input list b c e f g h j k l n pp would like mapat framed list mapat framed list work expected enter image description first go spantorange span x z module znew z x z znew range x znew vectorq z z integerq thread z z helper function list module li list freeq li span li li replace li head span li li span spantorange sequence flatten outer list sequence li depth outer list sequence li protected unprotect span mapat span mapat func list span x z mapat func list thread spantorange mapat func list partspec freeq partspec span module f p partspec mapat func list join helper p protect evaluate protected far finished extended value support valid us span mapat framed list mapat framed list mapat framed list