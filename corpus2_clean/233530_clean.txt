consider service update table database using ef map table entity record updated actually updated new record created old one made history setting num age date birthdate datetime incremental number num represents history record num current record service update person detail update sequence number num insert new person detail record assign sequence number num represent history record else make num num insert sequence number incremented num set num logic trying move access logic service layer repository layer able clearly figure part considered business logic considered access logic