sleeping problem classical synchronization problem many may familiar least heard based premise thread sleep customer customer thread waiting room semaphore someone cut hair symbolizing processing costumer leaf one waiting room go sleep another customer arrives must wake made implementation using following basic idea pseudo using sem wait sem post num smooth reading semaphore customer num semaphore num mutex num n num sem wait customer wait customer sleep sem wait mutex protect number available seat chair get free sem post bring customer sem post release mutex chair cutting hair customer num sem wait protects seat num thread try sit chair case num sitting sem post customer notify sem post release lock sem wait wait waiting room busy customer hair cut else sem post release lock customer leaf however implement problem multiple head got stuck went wikipedia see could find something thing found multiple sleeping problem additional complexity coordinating several among waiting customer figure case complexity several going waiting room see anyone taking one single customer would need extra semaphore wait lock semaphore sem post