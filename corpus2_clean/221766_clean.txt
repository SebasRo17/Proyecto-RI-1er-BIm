integration testing system using public apis test look something like def email create random email password create random password ok account signup email password assert ok url wait confirmation email assert url ok account verify url assert ok token get auth token email password token assert b b token assert b c c token b basically attempting test entire flow single transaction step flow depends previous step succeeding restricting external api go poking value database either one really long test assert b assert c assert break separate test method test need result previous test thing def etc email password def email password token get auth token email password assert token token def testa token token etc think smell better way write test