need function rotates translates huge amount line segment example set line segment form x z x z data randomreal three vector n n n n orthogonal n p p p p want perform rigid right handed transformation sends p origin n z axis axis order apply data know rotationmatrix rotationtransform coded ugly solution due inexperience amount data struggling performance would grateful someone provide fast solution possible explain fast edit ugly code embarrassment rotz rotationtransform n roty rotationtransform rt v roty rotz p v datatrans rt data taking n randomreal n n n orthogonal p randomreal timing rt data intel core duo cpu ghz gb ram ubuntu mathematica distribution