say view page user perform action multiple step action would involve db operation transaction snippet pseudo like view num step num step num call step num called different point view begin transaction db ops end transaction say want log user progress view save state persistent manner db program app interrupted establish state last user action inside view view1 step num logger log view1 step1 done step num call logger log view1 step2 done step num logger log view1 step3 done ideally would want persistent logging db based transactional action done db transaction want create inconsistent state action performed reflected log state vice versa question achieve said goal minimum inter dependency soc suggestion example view num step num step num begin transaction call begin end transaction statement removed logger log view1 step3 done end transaction step num like handling transaction belongs naturally action another one view num step num step num call view1 step3 done step num begin transaction db ops logger log end transaction like one either log message handling belong action