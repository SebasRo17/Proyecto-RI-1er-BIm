spent num num hour developing part game using javascript html5 canvas started idea started proof concept coming along nicely automated test game starting become complex enough could benefit automated testing seems tough depends mutating global state like refactor whole thing using underscore j functional programming library javascript part think start scratch using functional programming style testing think refactoring imperative declarative might better learning experience safer way get current state functionality problem know want look like end know turn current hoping people could give tip la refactoring book working effectively legacy example first step thinking banning global state take every us global pas parameter instead next step may ban mutation always new advice would appreciated never taken oo refactored functional