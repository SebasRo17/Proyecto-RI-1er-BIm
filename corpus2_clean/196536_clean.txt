looking refactor existing design move bunch stuff database memory many reason db approch dangerous first act take existing object expand state previous object new parent youngest child could walk find parent ask edge node changed thing make state accessible every effectively know parent child thought obvious simplification would make storing thing memory much easier problem need able construct object without modifying model untill addtomodel called mean need able construct object one state update state consistent model state properly represent interconnectivity node informed edge added edge need know path etc etc proved surprisingly complicated keep consistent end either encapsulation issue like assuming know call package scope method change memory public method able change state well concern aliasing someone creates new node connection model say node connected b c e thought many approches work none feel clean issue trying make object aware state thus putting much effort model maintain state