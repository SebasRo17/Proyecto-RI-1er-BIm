let u assume following c public encoding style default set encoding style const encodingstyle encodingstyle set encoding style encodingstyle encodingstyle get encoding style const get encoding style encode const message message const iterator begin end end end set raw message add field encode private required extremely efficient encoding performed ten thousand message per second time required instantiate non negligible cost solve issue defined member initialized inside constructor issue non const mean encode must also non const however make temporary inside encode could flagged const mean every call encode also non const start ruining program const correctness understand mutable keyword work work could use solve problem question would considered bad form since internals technically modified consideration thread safety concern guaranteed single thread although may created multiple thread set raw impact outside encode set cleared overwritten next time set raw called