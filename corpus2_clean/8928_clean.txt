old code analyze correlation time series looking window different length shifting across time series data code get set time series data case using financialdata convenience set list window calculate correlation partition data matrix applying window time calculates correlation pad data plot code data transpose drop financialdata aug spy gld none none window range round length data partitioneddata partition data window correlation map correlation partitioneddata plotdata padleft correlation listplot plotdata imagesize axeslabel day window correlation plotrange automatic automatic boxratios viewpoint output listplot typically run correlation log return rather price wanted keep example simple possible case window length corresponding window plot work fine want look correlation measure spearmanrankcorrelation kendallrankcorrelation neither take matrix input take vector enter image description enter image description problem come single line code correlation map correlation partitioneddata need alter line code map pair vector matrix level partitioneddata correlation also use vector input give generalized approach additional background structure partitioneddata look like dimension partitioneddata dimension partitioneddata fiddled around morning keep confusing see clear way use form map using levelspec keep trying variation pure function keep getting muddle tried lot variation basic approach correlation partitioneddata get anywhere thought guidance appreciated