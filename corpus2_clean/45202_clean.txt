trying create simple series bernoulli bit whose probability follow two state markov chain probinitial initial state markov chain define two state markov transition matrix p probability success given prior success p probability success given prior failure want create table containing nevents nsimulations able create single table containing nevents behaves properly e estimate p p correct however try scale following code nsimulations get strange value p p back nsimulations run sometimes get sequence bit nsimulations realized mathematica remembering function value decided use module function follows probsuccess ii integer ii p p clearall simdataunit simdataunit k module sucess success randomvariate bernoullidistribution probinitial success ii integer success ii randomvariate bernoullidistribution probsuccess success ii table success jj jj nevents call simdataunit k get different random realization nsimulations simdatamany table simdataunit ii ii nsimulations hoping making success variable local module would make difference suggestion welcome