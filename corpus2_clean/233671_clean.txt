message contain multiple type payload sometimes payload derived common payload however becomes problematic message want know payload subclass various reason checking message equality message part besides payload equal switch case payload response static cast payload get static cast payload get break case payload setup static cast payload get static cast payload get break deserializing since deserialization method static payload immutable switch case payload response load fromjson break case payload setup load fromjson break case payload start case payload stop case break load stay default throw exception program logic forgot parse payload ensuring payload attached message constructing switch case payload response case payload setup case enforce ioexception payload nullptr message payload required break case payload start case payload stop case enforce ioexception payload nullptr message payload break default throw exception program logic forgot handle payload alarm bell going going head violates solid like tomorrow obviously scale well since add case statement every time add new payload cleaner approach could take