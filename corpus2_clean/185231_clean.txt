working net open source project generating sql initially wrote project spit exactly one sql format ugly started using project real world decided would nice could generate pretty sql mode ugly sql release mode first go involved lot else loop within command generation quickly got much handle started looking another approach would allow plug different formatting strategy also looked sql formatting library specific one dialect right playing idea generating tree token similar abstract syntax tree ast work hoping navigate tree generate text based tree built tree sure write visit node feel like going backwards instead parsing sql generating ast spitting sql object allowing someone build sql object generate ast spitting sql someone us library build select statement specify value select table select filter ordering etc generated ast less information originally started asking next token keyword get picture write bunch elif else statement figure come next least sql object could use polymorphism avoid nasty branching perhaps missed day theory perhaps trying go backwards whatever reason next step really unclear think ast route right direction even mean losing information able write really stupid formatter put space every token really come getting fancy overwhelmed anyone good resource going backwards would probably really helpful