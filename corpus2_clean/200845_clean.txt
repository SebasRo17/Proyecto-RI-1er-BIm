mvc web app wired postgresql db us full gamut various referential constraint ensure referential integrity opposed say rail approach try check model logic also choice using orm writing sql statement hand model want write unit test functional test problem write test database opposed mocking create entire long hierarchical chain reference model testing system let generate vacuum e g cannot create model without foreign key foreign key point existing record etc way chain thing remember unlike orm cannot trust access layer dal work expected might fat statement somewhere maybe got logic wrong must test access layer supposed one way solve problem use something like rail factory girl properly configured generate chain record need instantiate model system way test dal model logic obviously ideal test case would waste ton time hitting db add extra boilerplate simply need suite go time real fast bad solution thinking test suite dal test suite would make sure creating right reference would test sql statement working expected reference really explicitly tested seems bit overkill done desired least make sure chain relation built happy path scenario suite ultimately going comparatively short thus consume many cycle mock model controller test thing tested isolation without db reference constaints getting way vast majority testing happen mocking db make complete sense far saving time go way also testing sql access layer twice need question proposed solution people solve sql constraint model controller test problem missing option