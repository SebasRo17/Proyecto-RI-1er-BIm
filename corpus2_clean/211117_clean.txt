using state pattern num state application state membership card num major state num boolean attribute membership card actually affect behavior decided embed state multiplied num state problem state naming getting ending state named like membership printed linked premium frozen different attribute make clear ok state name like