regularly want test certain function foo give expected result mapping n level matrix naive approach write range test map foo arraydepth map foo arraydepth case correctly give foo case correctly give foo foo foo foo foo foo foo foo foo always map innermost level looking elegant automated solution possibly oneliner like buildlevels range range know implement short efficient way thanks advance help