note coming window visual c background note already read michael feather working effectively legacy note broad question asking narrow answer e want narrow question specific platform make system useful answer likely contain one combination c development model even ideally well organized source file h cpp h cpp h header cpp may needed static lib module application consists n module even static library linked together executable module end get source binary module need project file make file whatever file tell linker generate binary module sourcecode adding unit test regardless testing framework use regardless actually put test need produce different additional binary module test production least executable dynamic library static libs tad easier need produce different binary module test need maintain separate additional set setting test visual studio try minimize amount work using file still left separate project file test production module become problematic maintain make system sure done explicitly want question encompass technique one may translate tl dr prevent manually edit two different project file one test one production every time add change something production setting might think change thing often think real world scale project dozen hundred module dozen developer tiny amount manual work save test scaffolding multiply