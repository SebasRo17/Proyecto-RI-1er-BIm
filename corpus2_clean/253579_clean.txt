company many wcf service may may replaced near future old web application written webforms communicates straight service via soap return datatables designing new modern web application modern style angularjs client communicates asp net web api via json web api communicates wcf service via soap future want let web api handle request go straight database business logic implemented wcf service complicated going take time rewrite replace problem trying make easy near future replace wcf service storage e g another endpoint database whatever also want make easy unit test business logic structured web api repository layer service layer repository layer straight communication storage wcf service database whatever service layer us repository dependency injection get care get later control structure returned storage datatable poco able test logic service layer mock repository using dependency injection explain going question make sense making overly complicated could simplified way possible simplicity make complicated maintain goal make easy possible switch another storage later e g orm able test logic service layer majority business logic implemented wcf service datatables want control structure returned client advice greatly appreciated update num num num created repository factory service would share repository easy mock repository add factory create provider using factory advice much appreciated want know making thing complicated look like num repository factory public repositoryfactory private dictionary repository public repositoryfactory repository new dictionary public addrepository repo repository containskey typeof repository remove typeof repository add typeof repo public dynamic getrepository repository containskey typeof repository typeof throw new repository found typeof fond dynamic know retrieve repository otherwise num repository service service repository interface repository interface extend public interface invoice repository interface make easy mock repository later public interface list invoice invoice repository connects storage retrieve invoice public public list invoice get invoice somewhere could wcf database whatever using proxy new proxy invoice service service handle talking real mock repository public repository factory repositoryfactory default constructor default connects real repository public repositoryfactory repo repo service get invoice repository mock real public list invoice query repository getrepository