reading 21st century c arrived chapter num section marking exceptional numeric value explains use bit store arbitrary bit pattern use marker pointer book mention webkit us technique really sure understood utility technique see hack relies hardware caring nan coming background used c snippet set read marker nan include stdio h include math h isnan double ref double set na ref ref num num cr ref cr num ref na double ref num set na never called na yet cc cr ref num sizeof double cc cr num num double x set na double x printf x set na na n na x printf x set na nan n isnan x printf x na n na printf num num na n na num num printf num na n na num print x set na na num x set na nan num x na num num num na num num na num h webkit explains encoding used purpose technique benefit space performance high enough balance hackish nature