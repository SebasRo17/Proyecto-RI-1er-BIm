follow question original question thinking going generating diffs storing diffs database history table using diff match patch library generate called patch every save compare previous new version generate patch patch could used generate document specific point time dilemma store insert new database record every patch b store patch javascript store history table one db history record document patch concern many db record generated slow cpu intensive query b one record record somehow corrupted deleted entire revision history gone looking suggestion concern either approach