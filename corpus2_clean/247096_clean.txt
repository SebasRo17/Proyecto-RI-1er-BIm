right num table lot record num num user select record according rule based record num high chance num user select record num user update record save back db record selected soft deleted num optimistic locking tried performance accepted po num solution user selects record update lock field record problem num collision still occurring user still selecting record need prevent num user selecting record num need release lock manually user take action long time searched seems amazon sqs good solution problem search queue good technology solve problem need implement searchable queue message locked selected lock expires certain amount time