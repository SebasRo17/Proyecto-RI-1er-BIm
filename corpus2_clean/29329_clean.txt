found following debugging problem mathematica calculating derivative integerpart x odd way plot integerpart u integerpart x x x u u plotrange full enter image description know violet curve plot mathematica think derivative integerpart x edit consider example following f x sin x integerpart x plot f x derivative f x x pi enter image description similarly plot fractionalpart x derivative fractionalpart x x enter image description happening