found good link quaternion mathematica know create quaternion rotation matrix anyone help please update need rotation may converted back quaternion use following algorithm process performed following stage follows calculate trace matrix equation x z x z mat mat mat trace matrix greater zero perform instant calculation sqrt w x mat mat mat mat z mat mat trace matrix less equal zero identify major diagonal element greatest value depending value calculate following column sqrt mr mr mr qx qy mr mr qz mr mr qw mr mr column sqrt mr mr mr qx mr mr qy qz mr mr qw mr mr column sqrt mr mr mr qx mr mr qy mr mr qz qw mr mr quaternion defined q qx qy qz qw