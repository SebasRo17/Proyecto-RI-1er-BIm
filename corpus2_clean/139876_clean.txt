basically logging counting application counting number packet counting packet etc p2p chat network equates num num million packet num minute period take snapshot information removing packet older num minute every five minute maximum item collection num num million need make num connection different possibility packet trying inserted least num time probably holding memory reasonable option currently using dictionary storing information large amount item trying store issue large heap amount memory usage continuously grows time dictionary ulong packet public packet public ushort public bool public searchtext public bool flagged public byte packettype public datetime timestamp tried using mysql able keep amount need insert checking make sure duplicate using transaction tried mongodb cpu usage insane keep either issue arises every num minute remove packet older num minute take snapshot using linq query count number packet containing certain packet also calling distinct query strip num byte ip address keyvaluepair key combine use get distinct number peer packet application currently hovers around num 1gb memory usage snapshot called go far double usage issue insane amount ram vm running limited 2gb ram moment easy solution