large dataset need fit rather complicated function different value one parameter parameter must fixed every fit use levenbergmarquardt algorithm findminimum described difference function black box notice set method levenbergmarquardt residual sqrt residualvector optimvariables jacobian symbolic evaluationmonitor step findminimum take minute create optimized form symbolic jacobian every evaluation jacobian take second need fit function many different value parameter spend minute making jacobian identical fit exception value one parameter waste time tried compute symbolic form jacobian got identical result automatic symbolic jacobian used code jacobianmatrix list vectorq numberq sqrt residualvector optimvariables optimvariables method levenbergmarquardt residual sqrt residualvector optimvariables jacobian jacobianmatrix optimvariables evaluationmonitor step problem evaluation symbolic jacobian numerical value parameter take minute obviously findminimum optimizes internal representation way give huge speedup findminimum creates jacobian every fit possible optimize internal representation manually stress compute workingprecision higher machineprecision probably compilation option