really hope give interesting viewpoint situation satisfied current approach writing mp3 parser starting parser right working extended header parsing issue optional header defined differently version num num tag num version optional header defined follows struct id3 3 extended header dword extended header size either num num byte excluded word extended header flag dword size padding size tag excluding frame header num version defined struct id3 4 extended header dword extended header size byte number flag byte byte flag could parse header minimizing duplication using two different function parse version sound less great using single different flow occasion similar good practice kind issue tip avoiding duplication help would appreciated