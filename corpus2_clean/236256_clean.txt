receives buffer return buffer smaller buffer capacity best safest api fn buffer size buffer len size written buffer returned downside must also way indicate occurred band indicator errno fn buffer size buffer len case buffer len work buffer capacity size think ok somewhat awkward errno fn buffer size len size buffer len like previous separated two argument also return also awkward due many argument option