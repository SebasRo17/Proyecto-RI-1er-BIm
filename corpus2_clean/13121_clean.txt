meta level often find grow codebase organically part system eventually find need know least interface mercilessly decoupled often occurs research prototype one tends frequently think tweak small improvement planned original codebase usually setting piece need num zillion layer call way never anticipated designed lead ugly dilemma num use ugly hack yet another global bolting onto clearly belong putting bunch statement middle previously nothing logic seemingly straightforward task roundabout way make fit original codebase etc num shotgun surgery refactoring almost never get done practice likely rewritten anyhow become production quality hard get working first time hard test plain higher priority writing clean maintainable either deadline know prototype furthermore next tweak may break whatever nice abstraction come good meta tip design principle help avoid situation like first place looking answer simply recommend refactoring fact nightmarish shotgun surgery refactoring session exactly kind thing trying avoid