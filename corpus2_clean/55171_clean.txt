need return string librarylink function documentation state string returned result wolfram language access memory convert internal string format attempt free memory thus program allocates string result also need free memory separate function one setting string result since wolfram language need access string memory library function returned really mean need two function able return string one return one free memory really simpler way based interpretation minimal work needed return dynamically allocated string shown end post correct look quite tedious way let mathematica manage memory string including allocation freeing mtensors fair expected many case one would want return pre defined string case need free sometimes string dynamically allocated though becomes necessary free example use c std string save work using simple char c would analogous added tedium std string str null ugly global variable extern c dllexport int get string wolframlibrarydata libdata mint argc margument args margument re str new std string string return margument setutf string re const cast char str c str return library error extern c dllexport int free string wolframlibrarydata libdata mint argc margument args margument re delete str str null return library error mathematica igetstring libraryfunctionload lib get string utf string ifreestring libraryfunctionload lib free string void getstring preemptprotect abortprotect module str str igetstring ifreestring str