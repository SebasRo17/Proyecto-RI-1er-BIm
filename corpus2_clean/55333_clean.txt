mathematica novice trying find fast way replace label rather large matrix x x resulted segmenting image watershedcomponents morphologicalcomponents present written function take label matrix matrix result segmentation list keeper label label want remain place returned matrix return new matrix label remaining place listofkeepersin label replaced returned matrix single background label designated suspect many efficient way achieve written welcome suggestion tried convert compiled function using compile success get error message tensor different rank also tried use paralleltable instead table notice much improvement thanks advance help provide gr componentkeeperfunction matrixin listofkeepersin block matrixtoreturn matrixtoreturn table memberq listofkeepersin matrixin r c true label value keeper list keep label place e make value table matrixin r c matrixin r c memberq listofkeepersin matrixin r c false label value keeper list replace label designated background label designate background label value close r dimension matrixin c dimension matrixin close table return matrixtoreturn close block