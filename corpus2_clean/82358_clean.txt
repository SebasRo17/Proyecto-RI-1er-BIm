process writing mail server stack fairly critical design decision whether unique message appear one message box simple case easy make decision e g message obviously cannot exist inbox trash mailbox subtle situation like work mailbox trash mailbox little trickier easier assume client notice unique message appears one mailbox throw fit use tagging message exist major mailbox use tagging identify attribute client support tag quite lot fake message uniqueness difficult server end display tag mailbox cardinal sin message multiple mailbox first place specifically looking broadest possible client friendly solution making client independent server unique message unique identifier server alpha numeric usually header body component could freak coincidence hitting send twice quick succession duplicated fake identifier would face client would linked back original server edits edited clarity