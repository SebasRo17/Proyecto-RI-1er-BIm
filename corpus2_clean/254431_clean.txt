let take fidelity example one set sell stock trailing stop lost num last price even simpler one set limited sell order given price must million order outstanding given time high level implement logic check pending order fulfill timely basis core functionality broker implement stock exchange provide case question stock exchange implement logic assume simply check order repeatedly inefficient example foreach user foreach outstanding order user sell sell wait num something like foreach stock foreach order stock price last stored stock order look table sell sell wait num would sort scale order among large volume