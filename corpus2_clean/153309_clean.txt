started using bdd wordpress plugin working rewriting j codebase test encountered problem going steady wondering right approach writing test pas normal browser environment inside wordpress choose want plugin totally indipendent wordpress environment using requirejs way expose globals loading version jquery override one ship wordpress way plugin would work every wordpress version would break jquery version someone use plugin old wordpress version wonder right approach always test inside environment working since wordpress implies globals write purely testing purpose like get ajax url typeof window undefined else window apart got everything working right think