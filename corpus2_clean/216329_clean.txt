need elegance performance decide best implementation dom algorithm face simple illustrate many little dilemma use iterator populate item need copied use clone operator import use parentnode see first removechild first replacechild avoids side effect position today arbitrary choice follow implementation like convention configuration principle another consideration performance article showing benchmark p generic dom question language php javascript etc problem