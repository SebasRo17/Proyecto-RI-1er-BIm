trying link one lapack function mathematica librarylink library function work great first execution crash second time code modified mmasrc include wolframlibrary h include wolframcompilelibrary h dllexport mint wolframlibrary getversion return wolframlibraryversion dllexport int wolframlibrary initialize wolframlibrarydata libdata return extern c void zspsv char uplo const mint n mint nrhs mcomplex mint ipiv mcomplex b mint ldb mint info extern c dllexport int lpksolveaxbs wolframlibrarydata libdata mint argc margument args margument re mtensor ta margument getmtensor args mtensor tb margument getmtensor args mint n mtensor getdimensionsmacro tb mcomplex mtensor getcomplexdatamacro ta mcomplex b mtensor getcomplexdatamacro tb char u u mint ipiv n mint nrhs mint lda n ldb n mint info mint j mcomplex ap n n j j n j j ap j j n j zspsv u n nrhs ap ipiv b ldb info margument setmtensor re tb return library error need ccompilerdriver createlibrary mmasrc lpk debug true targetdirectory tmp compileoptions llapack b lpksolve libraryfunctionload tmp lpk dylib lpksolveaxbs complex complex complex libraryfunction lpksolveaxbs complex complex complex ab linearsolve b lpksolve b max table linearsolve b absolutetiming null table lpksolve b absolutetiming null table lpksolve b absolutetiming executing hear beep sound kernel crash output kernel crash second time invoking librarylink function fix update todd gayley commented halirutan answer bug update still fixed version