collection client server side object need work collection adding removing client sending message updating connection setting perform action simultaneously mutex another synchronization primitive required want share one instance collection object require access private field collection hope sample make clear c collection std vector client client mutex sendmessage lock client send message const std lock client inside collection change setting see class require direct access collection private field give advice implement behaviour correctly e keeping collection interface simple without knowing user