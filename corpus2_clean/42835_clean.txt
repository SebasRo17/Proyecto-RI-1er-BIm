using simulated annealing method simulation based optimization process variable using nminimize print input output every iteration using evaluation monitor noticed iteration mathematica give convergence result checking result evaluation monitor show ultimate convergence result global minimal process visited better minimal one iteration happening sample code demand n k min k vf n capacity supply n k min n kj k w n capacity flo n ku kd min demand n ku supply n kd dx vf dt n round flen dx round simtime dt p round rlen dx vf w capacity w vf kj vf w l flen rlen simtime kj w vf dt rmlocation round p j f module b b b tt ntwrktt j rm x piecewise b x b x b true ntwrktt clear k kr k k constantarray n kr table table k p n constantarray n n kr dx vf tt plus plus kr ntwrktt tt k k tt tt n fqin min demand l k supply l k fqout dem demand l k dem dem dem min supply l k dem demand kr p qr dx fqin dx fqout min demand l k supply l k k k fqin fqout qr vf kr kr ir ir p ir mr ir rmlocation rm dx j dt capacity rqin min mr ir flo kr ir kr ir rqout mr ir rmlocation rm dx j dt capacity rqout min mr ir p flo kr ir kr ir kr ir kr ir rqin rqout vf kr j dx vf tt plus plus kr tt plus k k k ntwrktt tt j ntwrktt dt nminimize f b c b c element b c integer b c method simulatedannealing searchpoints evaluationmonitor print b b c c f b c f b c hope help p suggestion improve performance code greatly appreciated thank edit per kuba suggestion split original question two second part simulated annealing parameter result