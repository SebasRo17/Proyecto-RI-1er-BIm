sometimes try create function inside function mathematica give hard time usually play around syntax get something like really idea certain thing work others example ran recently code version an tf ndsolve x v v x v x v x v tf flatten an plot x v work beautifully reason try nest an inside function replacing mathematica evaluate code version b an tf ndsolve x v v x v x v x v tf flatten plot x v an question boil code version work code version b