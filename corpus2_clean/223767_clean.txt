automated invoicing web app trying build structure circumstance allow invoice double charged thing working perfectly scheduled task run everything charge supposed scenario know cause problem db server go middle process lead number duplicate charge also whatever reason file need checked browser developer hit refresh file done processing duplicate charge occur similar scenario protect see need way handle given sensitivity transaction imaging seeing power company auto charging twice bank statement current configuration query api post transaction parse reply response num insert payment update invoice amount due insert transaction email accepted notification else email declined notification smaller process happen well quite statement heavy lifting part would like learn hear would best way handle safeguarding considering third party api gateway would break one idea flagging process ran give record failed build query handle accordingly sure efficient likely inefficient would