authentication module wrote time ago seeing error way writing unit test writing unit test hard time coming good name good area test instance thing like redirect logged pas logged login work given proper credential personally think bit ugly even though seems proper also trouble differentiating test scanning read least twice know failed thought maybe instead writing test purely test functionality maybe write set test cover scenario instance test stub came public authentication bill public bill account assert username bill userstore public bill attempt post comment redirected login call redirect login page public bill creates account pretend login page doubled registration made account add account public bill log new account login bill password assert redirected login page public bill post comment call kill request redirect login page heard pattern seen acceptance story fundamentally different big difference coming scenario force test rather manually trying come possible interaction need test also know encourages unit test test exactly one think ok though also aware cause problem least testing framework usually assume test independent order matter would case anyway advisable pattern would perfect fit integration test api rather unit test personal project open experiment may may go well