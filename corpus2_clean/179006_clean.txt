job refactor old library gi vector processing encapsulates collection building outline offer different method checking consistency checking function optional parameter allows perform process instance std vector point process mode num test building outline intersecting intersection point pas non argument modify outline remove intersection think pretty bad call site reader familiar base assume called performs check modifiy want change also want avoid duplication check process method mostly similar thinking something like private worker std vector point process mode num equivalent current may perform process depending process mode public interface check process std vector point const num std vector point process mode different process mode process mode force break const correctness non const separate check process avoiding duplication keeping const correctness