question motivation depicted section many way make text italic perhaps one good swap italic algorithm problem reveals aditional xhtml using tag must balanced example original text p id p1 several fossil discovered p text swapping italic p id p2 several fossil discovered p look like num several fossil discovered num several fossil discovered algoritms introduction discussion layout solution simplest algorithm checking font style cs property text block invert jquery cs font style italic cs font style normal else cs font style italic algorithm survive little complex test p id p3 b f big italic big without b p second simplest algorithm concrete solution used example section two step num enclose xhtml fragment italic num invert open close italic tag ex writing javascript var fragment xhtml content replace p1 p1 also survive second test balance tag corrected algorithm run portable neither fast elegant example section point question simple good generic usable browser portable another language algorithm know another swap italic algorithm p generic sense even translate algorithm xslt algorithm must produce xhtml without intermediary blackbox like tidy motivation need port swap italic algorithm text editor server parser etc case normalize standard xhtml tag parsing xhtml text prose book scientific article exported different origin style text exported normal text lot title ex article title chapter title sometimes full chapter full text box ex article abstract stylized italic stylized italic must inverted typical case transform original chapter italic chapter normal text see case roughly num page book num num chapter need inverted italicized quotation mark abstract etc see example need change back normal without lost emphasis word writing binomial name specie scientific text usually italic inverted font different used normal text hundred italicized title article article section xhtml exported article must inverted work place p see example beginning question several need also translate generic algorithm answer xslt library tag balancing correction exists example implementing javascript php non generic swap italic algorithm generic one need general xml interleaving algorithm use browser dom tidy correction alternative interleaving javascript run complex input illustrating jquery implementation var sample1 html get original html text fragment inversion algorithm add remove italic replace p1 p1 well formed xhtml ok inverted html dom rigth minor correction clean empty inverted html replace z num num clean replace z num num clean remain inverted html end algorithm alert php tidy javascript translated php natural translation using domdocument behaviour browser tidy show result sample1 b big italic big without b inverted inverted echo sample1 tidy correction sample1 get original html text fragment inversion algorithm add remove italic preg replace callback num well formed xhtml ok config show body xhtml tidy new tidy tidy parsestring config utf8 tidy tidy corrects minor correction clean empty preg replace z num num clean preg replace z num num clean remain end algorithm echo n n