trying use module together function tmp x f module x evaluate tmp work tmp x module x evaluate tmp f output x edit seeing answer wonder get something like work clearall withrules setattributes withrules holdall withrules rule expr internal inheritedblock rule ruledelayed setattributes rule ruledelayed holdfirst unevaluated expr rule clearall f tmp tmp x withrules expr tmp f module x expr edit maybe better explain like lot calculation term k x k k z outputted term three variable however sometimes need integrate expression need use spherical coordinate set k x k sin co b integrate want transformation always set want calculation k x k k z variable en b