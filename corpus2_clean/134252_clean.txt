top level state machine state edge call parent state machine b c state within parent state machine state machine call child state machine b0 b1 b2 c parent state machine transition b b state machine take b done running relinquish control parent state machine transition state c design pattern use wondering child state machine within parent state machine exact project quite complex natural encapsulate internal working child state