trying make nonlinearmodelfit model result numerical calculation code work slow also seems memory leak appreciate advice improve code make faster stop leaking simplified version model historylength model gnin numberq gpin numberq module rep eq sol rep gn gnin gp gpin n p eq n gn n n f p gp p p f n p f n p f sol ndsolve eq rep n p f first n p n p sol edit maximum time ndsolve changed see comment three coupled equation one differential equation could removed easily output want model however n p f rather n p n p used pure function pas model know better way make fake data tmp model data table tmp call memoryinuse nlm nonlinearmodelfit data model gn gp gn gp gn gp memoryinuse run successfully giving best fit parameter gn gp take several minute second edit revised second absolutetiming ghz imac running mma case could clearly give excellent initial guess bit harder real problem aside giving initial guess cause take second return best fit badly missing gn time running memoryinuse command return running cause steady increase memory usage believe memory leak running name return list many variable like n name n length name p length return assume n p variable kept reason related return module run nonlinearmodelfit total memory continues rise number n p variable continue increase seems stay close indicating garbage collection occurring also total memory used n p variable using symbolmemoryusage explain increase memory usage kernel total symbolmemoryusage name n total symbolmemoryusage name p return much less mb increase memory use running nonlinearmodelfit actual case increased memory use reach gb grind computer halt nonlinearmodelfit finish simple case leak smaller still running memoryinuse absolutetiming model memoryinuse return memory increase kb evaluation model add simple counter model count number time evaluated nonlinearmodelfit answer indicating mb increase memory use mostly due leak model similarly time evaluate model k time second close total evaluation time slowness code memory leak model understand limit fast model ndsolve could possibly suspect better previous discussion block v module left concerned block thing understand tried advice coding practice particular better way return function model correct format put nonlinearmodelfit speed memory greatly appreciated edit case people dissuaded working problem running time example code changed maximum time ndsolve model make nonlinearmodelfit run second rather memory leak still magnitude original question comment advice welcome