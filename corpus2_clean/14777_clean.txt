made spatial predator prey model run little slow seeking advice compile optimise speed first define matrix empty site predator prey present e r initspace n randominteger n n space initspace defined getcell function look neighbour cell position j matrix sp certain value x return coordinate cell find cell value return coordinate j getcell compile sp integer integer j integer x integer block n k l cell n dimension sp cell j k mod k n neighborhood l mod j l k l j sp k l x appendto cell k l l k length cell j randomchoice rest cell compilationtarget c parallelization true runtimeoptions speed define module step calculates space matrix next time step based given birth rate b death rate mu one event random location space step b mu block j k l dim dim dimension space random integer dim j random integer dim predator space j r random real mu predator dying space j e predator eating k l getcell space j space k l r prey space j random real b prey reproducing k l getcell space j e space k l finally many iteration gridsize space initspace gridsize nrsteps stepsize b mu population table nrsteps step b mu stepsize population space nrsteps animate arrayplot population colorrules e black r red blue nrsteps stepsize animationrepetitions animationrunning false ideally would like latter two module compiled well tried put compile around got bunch error anyone know might wrong advice optimise code speed try put everything single compiled module