nodejs project function like socketio socket draw socket broadcast socket room emit draw addevent socket draw like rewrite something like socket config socket broadcast socket room emit draw addevent socket draw socket draw socket config idea placing function simple closure like put different module make easier test passing mockup object construct callback wondering overkill better way make testable