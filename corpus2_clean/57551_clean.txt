following functional style fixed length queue object want generalize functional style accumulator pattern lot thing look like accumulator loosely defined binary function take state carrying object first parameter datum second parameter return state carrying object accumulator scanned mapped theoretically pending answer cited question folded sequence stream data yield interesting result thing look like accumulator statistic filter smoother estimator hidden markov model kalman viterbi controller sure many elegance interested functional style keep example small consider following newaccumulator runningsum setattributes accumulate holdfirst accumulate accumulator datum numberq accumulator runningsum datum accumulator keep running sum could easily keep higher order statistic thing quite rich useful use easily compute gauss day reckoning sum example myaccumulator newaccumulator scan accumulate myaccumulator range myaccumulator runningsum occurred nice could write scan partial accumulate myaccumulator range setattributes partial holdrest partial f arg f arg unit test follows partial f x f x even generalize little partial f f sequence quiet join unit test partial f x z w partial f x partial f x f x z w f x f x lo behold work example myaccumulator newaccumulator scan partial accumulate myaccumulator range myaccumulator runningsum one clueless edit holdrest attribute partial seem make difference put habit side effecting function often work best hold argument premature evaluation