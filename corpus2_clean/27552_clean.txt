trying find fastest way calculate two value sum different expression combine calculation one sum compiling c test function f compile n integer module sum module sin n compilationtarget c runtimeoptions speed g compile n integer module sum sin sin n compilationtarget c runtimeoptions speed h compile n integer module sum sin n compilationtarget c runtimeoptions speed q compile n integer module sum sin n sum sin n compilationtarget c runtimeoptions speed q compile n integer module table sin n total table sin n total compilationtarget c runtimeoptions speed nc n sum sin n sum sin n benchmark f n timing f n tableform flatten table benchmark fun fun f g h q q nc tableheadings f g h q q nc timing result expect function h fastest reusing expensive calculation sin compiler smart enough implement reuse approximately speed three instead function q q fastest g way faster compiled version following result timing result f g h q q nc happening guess evaluation escape compiled body update big thanks halirutan good answer completeness added non compiled version function fhal fhalnoc n r range n total r sin r slightly modified benchmark function testrange benchmark f n result table first absolutetiming f n mean result tableform table benchmark fun n n fun f g h q q nc fhal fhalnoc n testrange tableheadings f g h q q nc fhal fhalnoc testrange got following result normalized timing list length benchmark result guess lesson learned even non compiled version utilizes listable faster timid attempt tune compilation full code available