csv file need edited multiple process time question without introducing race condition easy write end file without race condition open num ing append mode simply write thing get difficult removing line file easiest solution read file memory make change overwrite back file another process writes memory however new lost upon overwriting complicate matter platform support posix record lock checking file existence race condition waiting happen rename num replaces destination file exists instead failing editing file place leaf empty byte unless remaining byte shifted towards beginning file idea removing pseudocode filename home user somefile file open filename r tmp open filename tmp ax die could create tmp file append x creat write tmp read file copy file file new close file edit tmp file unlink filename die could unlink file file open filename wx die another process must written file copied w overwrite x force file creation write file read tmp copy tmp back original file unlink filename tmp die could unlink tmp file would better simple lock file appender process lock open filename lock wx die could lock file file open filename write file stuff close file close lock unlink filename lock editor process lock open filename lock wx die could lock file file open filename rw content read file edit content write file content close file close lock unlink filename lock rely additional file left process terminates causing process refuse write original file opinion problem brought fact o allows multiple writable file descriptor opened file time instead failing writable file descriptor already open seems creat closest thing real solution preventing filesystem race condition aside posix record lock another possible solution separate file multiple file directory granular control gained component line field file using creat example file id field would contain column field id csv file anymore might work yes know using database database built handle type problem program relatively simple hoping avoid overhead would pattern work better way insight kind problem would appreciated