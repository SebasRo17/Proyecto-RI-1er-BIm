bug really difficult track unit test green production application work properly happened filter set application ignore specified time window unit test seemed thorough turned green additionally integration test also produced result expected production however work result first two bullet problem difficult find turned problem test date using time zone america chicago production providing date utc realize logic filter correct utc date using joda time datetime object num workflow break fail produce spec specified logic needed handle date time zone fail thoroughly consider case unit test level fail insure integration test sufficiently similar production num change make workflow better prevent sort mistake future num effectively problem issue production testing