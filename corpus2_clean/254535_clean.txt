writing two class c matrix represents general matrix n dimension inherits matrix constraint n n reason designed way square matrix support additional specific operation like calculating inverse able guarantee function avaliable specific using nice thing additionally would support regular matrix operation used matrix matrix called calculates transpose matrix return new matrix inherited transpose square matrix guaranteed square matrix also want unsure best way implement would duplication essentially calculation use implicit typecast operator understand correctly would cause unnecessary allocation upcast matrix create new matrix transpose create new typecasting throw away matrix use explicit typecast operator would stupid typecast transpose explicitly also problem implicit operator unnecessary allocation another option change design inherit matrix problem also applies operator seems either implement typecasting operator might cost performance implement