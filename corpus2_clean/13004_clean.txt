following code construct tridiagonal matrix clearall th th nwells evenq nwells module size nwells bdiag bdiag randomreal size sparsearray band bdiag band band size size executed million time bdiag actually something change time unavoidable like speed much possible idea interested value nwells order edit let u compare time taken band version mrw version rojo version varying size table th absolutetiming first table banded absolutetiming first table banded absolutetiming first listlogplot axeslabel size mathematica graphic slowest one mine note logarithmic axis evidently band method fall behind larger system size also using band unpacks packing th absolutetiming banded absolutetiming mathematica graphic occurs band used insert packed bdiag list diagonal