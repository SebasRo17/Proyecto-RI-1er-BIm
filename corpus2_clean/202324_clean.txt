edit pointed steve pdr correctly implementing memento pattern design actually state pattern menu program built based menu program multiple level selects particular test level precisely describes operation level back go back one level memento level num server num server num server b level num server environment num test num production level num test num load num unit level num collection num legal doc num corporate doc level num optional load test num multi num single pdf level num command num move num copy num remove num custom level num enter keyword setup cleanup design design state state problem right state enum determining factor state back state next yet know nothing current memento state anyone experienced similar issue found effective way handle optional state static enum state server environment test collection command keyword finished possible solution flexible reference every case statement menu could check state set state enum accordingly pas builder however seem flexible flexible change struggling see effective way refactor design menu extends private state state private scanner reader private utility menu state new state reader new scanner system utility new recurring menu logic public list state state new arraylist state add new state boolean boolean get memento last memento state get state size num new memento builder num build system println prompt prepare memento next memento state state state value state size num get user selection reader nextline switch selection case exit reader close escape case quit new memento builder first selection build state clear break case back new memento builder previous state selection build state size num state remove num else state remove state size num state remove state size num break case num new memento builder next state selection build break case num new memento builder next state selection build break case num new memento builder next state selection build break case num new memento builder next state selection build break default state equal state category command selection system println executing command command environment utility nickname command state clear new memento builder first selection build else state equal state keyword new memento builder next state selection build state clear new memento builder first selection build else system println give another try continue break start recurring menu beginning num state size num state remove remove except first reader new scanner system state new state state state add state