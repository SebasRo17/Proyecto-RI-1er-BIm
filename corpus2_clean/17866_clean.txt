newbie forum trying use ndsolve solve ode involving interpolation function compare fitted curve data determine ode coefficient basically measure voltage v current circuit want use v determine value electric component circuit first make interpolation function waveform v data dataindex range myvoltdata transpose rawdata dataindex rawdata dataindex mycurrdata transpose rawdata dataindex rawdata dataindex voltagefunc interpolation myvoltdata interpolationorder second use ndsolve solve ode use solution calculate chi sq following code ode parameter fit r fit r fit c fit curroffset function fitfunc eventually return chi sq fitfunc r fit numberq r fit numberq c fit numberq curroffsetfit numberq block sol curr curr sol ndsolve voltagefunc curr r fit curr r fit curr curr r fit c fit curr curr fit curr fit voltagefunc fit r fit r fit curr curr fit fit accuracygoal apply plus mycurrdata fitdatarange curroffsetfit flatten curr sol mycurrdata fitdatarange mycurrdataerr fitdatarange datapnts finally use nminimize find fitting result chi sq minimum timing fitresult nminimize fitfunc r f r f c f ioffset r f r f c f ioffset r f r f c f ioffset accuracygoal method differentialevolution first problem since voltagefunc interpolation function data severely procrastinates ndsolve command result nminimize consuming vast amount time min wonder interpolation function ode delay ndsolve much optimization method make nminimize ndsolve faster secondly nminimize occasionally fails find global minimum suggestion improve fitting result reliability suggestion appreciated thank