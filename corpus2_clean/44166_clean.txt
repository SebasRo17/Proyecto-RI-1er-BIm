introduction would like enumerate factor near perfect matchings complete graph k n adjacency list representation k n basically x x n example case k near perfect matchings would k perfect matchings would nifty little illustration inspired example documentation nifty number factor k n given odd double factorial n n odd n n even see function grows even double factorial compared n n n n n n sake brevity ignoring parity using n notation row header attempt current solution generates n permutation partition pair filter p n partition permutation range n one p select p orderedq orderedq two p select p intersection intersection solution one filter permutation requiring element content sorted solution two thing exploiting fact order ignored set first solution magnitude faster second solution n tableform table ptemp p tone one ptemp timing first ttwo two ptemp timing first tone ttwo ttwo tone n tableheadings range n one two one faster one two one faster question achieve without n time much work generating permutation