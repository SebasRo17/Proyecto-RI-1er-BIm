come blockmatrix algebra mathematica make notation easier following need notation notation parsedboxwrapper rowbox centerdot b doublelongleftrightarrow parsedboxwrapper rowbox blockmultiply rowbox b notation parsedboxwrapper superscriptbox inv doublelongleftrightarrow parsedboxwrapper rowbox blockinv notation parsedboxwrapper superscriptbox rowbox doublelongleftrightarrow parsedboxwrapper rowbox blocktransp actual matrix algebra function clearall blocktransp setattributes blocktransp oneidentity blocktransp list map blocktransp transpose blocktransp b blocktransp blocktransp b blocktransp numberq blocktransp scalar blocktransp numberq blocktransp blocktransp scalar blocktransp blocktransp blockmultiply x blockmultiply blocktransp blocktransp x blocktransp blocktransp x x clearall blockmultiply blockmultiply mat mat inner blockmultiply mat mat number blockmultiply numberq b blockmultiply b blockmultiply b numberq blockmultiply b blockmultiply numberq blockmultiply numberq scalar symbol blockmultiply scalar b blockmultiply b blockmultiply scalar b blockmultiply b blockmultiply scalar blockmultiply scalar clearall blockinv blockinv mat map blockinv mat blockinv numberq make formatting expression scalar makeboxes scalar standardform makeboxes standardform funny cool thing like example first example example second example example third example example fourth example remark course blockinverse function sensless sense really invert correctly input blockinverse diagonal block matrix general formula block matrix block inversion implemented sake simplicity two question could come far make example scalar variable treated like scalar overload numberq scalar better way solved see definition added scalar match pattern head scalar see example pretty print thing superfluous bracket neglected elegant way function definition associativity non commutativity handled well