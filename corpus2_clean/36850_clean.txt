repeatednull appears buggy version define f follows f h list f intended accept possibly empty list non atomic possibly empty expression head change head list seems work properly first f g x g x calculates intended f g x h f g x h pattern match however f behaves unexpectedly empty list f pattern match appearance complete mystery expected f list tracing tell anything trace f traceinternal true f list probably bug defining f special case seems fix problem however actually special case sure correctness definition since may something wrong pattern picked h right choice pattern possibly empty list non atomic possibly empty expression head plausible explanation come upd clear thing elaborate test example goldberg answer note sebhofer comment releasehold clearall hold test test test patt h row named head patt test patt row without named head patt result vary use named v unnamed pattern one aspect convincing calssify issue bug test test column named head without named head output formatting adjusted manually also concern existing definition get overwritten clearall test test patt h row named head patt test patt row without named head patt downvalues test holdpattern test patt without named head patt holdpattern test patt h named head patt test without named head downvalues prepended subsequent one test patt h row newdef named head patt test patt row newdef without named head patt downvalues test holdpattern test patt newdef without named head patt holdpattern test patt h newdef named head patt holdpattern test patt without named head patt holdpattern test patt h named head patt test newdef without named head output satisfactorily corresponds new definition probably happen due unpredictability garbage accumulation additional example unstable pattern matching repeatednull may found comment