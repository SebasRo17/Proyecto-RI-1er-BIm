trouble getting head around active state handling menu menu used routing come drupal menu system handle routing well setting active state active trail state handled route act menu system aswell lot php framework router class handle routing seems good seperation since menu aware post option request writing frontend found hardcoding menu storing everything db passing value view like approach kind creating copy allready wrote router using menu example route get somewhere somewhere route post somewhere somewhere menu add label somewhere somewhere seperating concern nice menu depends heavily route set active state menu also know hierarchy set active trail yes setting active trail active status class actually view thing route menuitem active allover view seems stupid add active trail real bloat handling view get render setting active trail flag seems ugly way know foreach looping child child question pattern smart way get cleaner better one handle active trail problem thinking rendering child parent start ad deepest level work way child know parent parent know nothing child seems weird