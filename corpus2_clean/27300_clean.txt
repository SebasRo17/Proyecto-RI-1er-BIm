nb interested back story could simply jump forward code seeking optimize also believe code would work mma friend discussing issue social network one u mentioned effect person removing friend day would made calculation rather artificial situation realized would interesting find average number day would required everyone would left friend rule decided upon follows set n people considered pair either friend start day anyone longer friend removed day remaining people pick one friend unfriend consider two people initially friend alice bob alice decides unfriend bob vice versa friendship eliminated happen decide unfriend day occurs additional friendship made day maximum minimum number day everyone would left friend quite easy analyze average number day easy analyze mathematically seeing mathematica decided try following code isolatedvertexremover function inputgraph degreelist vertexdegree inputgraph indexgraph vertexdelete inputgraph degreelist clear func func system graph list list func testgraph func testgraph testadjacencylist adjacencylist testgraph vertexlist testgraph daughtergraphs edgedelete testgraph mapthread undirectededge transpose union sort transpose vertexlist testgraph tuples testadjacencylist daughtertally transpose isolatedvertexremover indexgraph total transpose tally daughtergraphs isomorphicgraphq total map func transpose daughtertally find average number day people left friend one simply run code follows example graph given set people initially friend func completegraph problem function even thought defined recursively nevertheless still take long time run complete graph size function take second run system able obtain result complete graph size fact graph larger size simply cause system abort first step generation daughter graph question therefore optimize code area focus opinion would generation daughtergraphs currently simply considering possible way people unfriend without taking account possible symmetry graph example case two people friend exactly set friend rather brute force method sure improved thank reading hope enjoyed question mathematical insight specific issue perhaps problem general would appreciated