high performance mysql book suggests sharding blog application one may want put comment across num shard first shard person posting comment shard post stored raise question reliably duplicate following duplication option across shard recommended option num make num separate insert php script pro logic application layer con user held num insert b logic need duplicated every client trying insert similar conclusion seems reasonable option num form federated table use trigger handle insert duplicate pro app layer need worry multiple insert con every shard need federated connection every shard b federation work machine lan num different site c connection federated server fails conclusion seem like sound idea option num messaging rabbitmq pro different client insert one place subscriber consume insert con complex b may impose overhead order host messaging server client c sure work look service locate appropriate shard conclusion sure option num suggestion greatly appreciate help