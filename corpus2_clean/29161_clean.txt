following simple code clear global v v log x q rc sub v x q rc arg vx v x vy v vxx simplify v x vxy simplify vx vyy simplify v vyx simplify vy x print print vx vx sub print vy vy sub print vxx vxx sub print vxy vxy sub print vyx vyx sub print vyy vyy sub print calculates first second derivative function v printed result added rule sub order make output much simpler however strange reason rule applies correctly first derivative vx vy effect second one vxx vxy vyx vyy idea