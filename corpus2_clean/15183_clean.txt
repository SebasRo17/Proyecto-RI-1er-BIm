mathematica wrap expression boxing code showing evaluation result front end unfortunately wrapping algorithm position mathematica end end flow described official documentation surprisingly stuff affect evaluation expression please see upvalues based approach problem removing head x head upvalues upvalues x holdpattern head x b c hold head b c x hold x x hold hold hold holdpattern used transformation pattern keep expression unevaluated transformed upvalues x work want transformation rule work pattern head x upvalues upvalues x holdpattern head except x x b c hold head b c x hold x x hold false x outputsizelimit dump box block recursionlimit typeset recursionlimit makeboxes x x standardform outputsizelimit dump loadsizecountrules trueq boxform sizecount outputsizelimit dump box outputsizelimit dump box outputsizelimit dump encapsulateoutput x x line sessionid x x seems pattern object except x capture wrapping code mathematica us adopt expression front end need surprise case using general pattern object work well claim code wrapping used front end need affect evaluation process mathematica core resulting read mathematica end end detail mean something like texbook knuth tex described behaviour bug probably corresponds feature implicit end end flow probably code case technique help avoid behaviour