written standard version tree map graphic show nested data looking improve layout switching different type polygon perhaps circle anyone see way adapt code style voronoi diagram otherwise enter image description enter image description code buf dbuf dq true tolist x list x tolist x x flatjoin list join tolist list second x x framestyle sequence edgeform directive opacity black thin graylevel opacity leafstyle sequence edgeform directive black thin graylevel opacity drawrectangle p p area list max depth length area framestyle dq cuboid append p depth append p depth rectangle p p first treemap area buf p buf p buf p buf p max depth dbuf drawrectangle p p max depth leafstyle dq cuboid append p depth append p depth rectangle p p treemap area lowerleft upperright max depth module width height area aspectratio fixedlengthdirection fittedareas j varlength fixedlength inc last aspectratios incspts lower upper layout vl recs prims lowerleft area area prims area area total area infinity apply time upperright lowerleft area total area infinity lowerleft lowerleft j j length area null width height subtract upperright lowerleft area width height aspectratio width height aspectratio fixedlength width fixedlengthdirection horizontal fixedlength height fixedlengthdirection vertical j length area appendto prims drawrectangle lowerleft upperright last area max depth break j length area fittedareas area j varlength total fittedareas fixedlength inc fittedareas varlength max varlength inc max break layout varlength inc area j j fixedlengthdirection vertical incspts flatjoin second lowerleft second lowerleft accumulate layout lower thread first lowerleft incspts upper thread first lowerleft layout rest incspts recs transpose lower upper incspts flatjoin first lowerleft first lowerleft accumulate layout lower thread incspts second lowerleft upper thread rest incspts second lowerleft layout recs transpose lower upper appendto prims mapthread drawrectangle max depth recs layout lowerleft fixedlengthdirection vertical first lowerleft layout second lowerleft first lowerleft second lowerleft layout dq graphic boxed false background black graphic prims