say following straightforward seeming function makearuledelayed b anotherrule makeanotherruledelayed b v b v v anotherrule makeanotherruledelayed x v h x foo h x use create ruledelayed get error message b makearuledelayed b ruledelayed rh pattern v h b appears right hand side rule v b v v v h b foo h b examining result indicates problem v b v v v h b foo h b using rule fails way expect workaround could think adding module body makeanotherrule makeanotherruledelayed x module v v h x foo h x help evidently must sort magical renaming going somewhere inside ruledelayed truncates nnn part name symbol generated module without able nest rule without name clash sure go creating nontrivial rule programmatically