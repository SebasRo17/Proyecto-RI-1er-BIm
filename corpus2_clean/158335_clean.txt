use mock ensure unit test run tested prevents bug module cause test dependent module b fail however also test interaction explicitly enough b green work b expects b right expectation b expectation already formally defined mock stub stub return certain certain mean expect must possible state show behavior instead writing long integration test set test stub mock already turn around use actual instance test correctness mock work practice best practice e g pseudo integration test belong test suite already provide likely used mock even possible popular mocking framework