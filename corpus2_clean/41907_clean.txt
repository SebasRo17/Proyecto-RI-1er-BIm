suppose vector mathbb r n n known advance want able write function operate component vector like able take derivative respect component example consider relation frac partial partial x j sum x assumption x independent want call simplify return similarly calling simplify frac partial x partial x j give kroneckerdelta j clear represent generic coordinate like seen sure provides answer linked post suggests could fixed n situation working especially since want see generic form n reference seems sympy let something close sympy tensor import indexedbase idx x indexbase x j map idx j x x diff bound method indexed diff x x diff x j valueerror differentiate wrt variable x j despite able represent variable abstractly seem differentiate another example suppose wanted calculate derivative entropy respect one component input distribution assuming variable independent final form matter n simplex distribution life like able dimension frac partial h partial p j frac partial partial p j sum p log p log p j problem like come optimization need provide gradient hessian numerical algorithm update two related post differentiate formally customize derivative behavior via upvalues