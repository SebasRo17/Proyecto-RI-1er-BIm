mathematica strange way sorting term seems using canonical sort expression e g mathbb sin x co co z returned mathbb co co z sin x interpret behaviour function name co sin precedence argument output sequence behaviour make output sometimes difficult interpret complicated term involving sum product transcendent function term sorted according transcendent function name according argument used however core question related problem simplifying given complex function e g frac v xx v xy left co left frac pi k right sin left frac pi k right sin left frac pi k right sin left frac pi k right co left frac pi k right co left frac pi k right right frac left frac v xx frac v xy right left co left frac pi k right sin left frac pi k right sin left frac pi k right sin left frac pi k right co left frac pi k right co left frac pi k right right substituting definition another complex function g co left frac pi k right sin left frac pi k right sin left frac pi k right sin left frac pi k right co left frac pi k right co left frac pi k right one readily see love textbook statement resulting function v xy g however use complex function complicating substitution task mathematica simple substitution using pattern like co x sin sin z sin x co co z g work two reason sequence trigonometric function preserved expected canonical sorting expression thus pattern x z matching different argument case problem using named pattern substitution think multiple issue would one second severe problem case conjugate negated function shown example course one solution defining pattern covering possible complex case function definition g co x sin sin z sin x co co z g co x sin sin z sin x co co z g co x sin sin z sin x co co z conjugate g co x sin sin z sin x co co z conjugate g looking less cumbersome approach since problem different complex function substitute multiplies substitution line approach idea implement elegant way