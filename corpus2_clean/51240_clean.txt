interested numerical evaluation following integral int prod n dx delta sum n x prod n f x f x complicated function unfortunately nintegrate seems give answer large error seems problem multi dimensional integral function contains phase fluctuation sim e ikx could one reason practice n sim although certainly better could take n large comparison also consider integral int prod n dx prod n f x instead evaluation whole expression nintegrate could factorize integral prod n left int dx f x right evaluate dimensional integral first take product seems give answer numerically much better nintegrating n dimensional integral numerically checking known mathematical identity something compare one delta function corresponds su n one without u n trouble one delta function integral factorize however hope way achieve numerical accuracy rather brute force nintegrate whole expression case would appreciate suggestion better numerical accuracy