developing little language time got fairly bare bone prototype implement basic feature looking scaling want make nasty architectural mistake massively refactor everything support feature like know key api feature required right lexer operate buffer using iterators token available inspection passing parser also provide hook comment parser operate token stream hard coded lexer ast construction swapped also annotated ast location information also ast readily available inspection prior analysis finally many analysis feature lazily evaluated easy get semantic representation ast sure feature semantic representation need readily available effort suggestion necessary regard