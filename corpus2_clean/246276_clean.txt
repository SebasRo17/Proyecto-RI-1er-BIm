work one project mostly taking passed external client persisting database enterprise app using jpa logic revolves around crud operation majority bug involve jpa one way another example num click save button twice jpa might try insert entity database second time causing primary key violation example num retrieve entity database edit try update jpa may try create new instance instead updating old one often solution needing add remove change jpa annotation time modifying dao logic figure get confidence using unit test tdd sure unit test tdd bad fit approaching problem wrong unit test seem like bad fit discover problem runtime need deploy app server reproduce issue usually database need involved consider outside definition unit test integration test tdd seems like bad fit deploy test feedback slow make unproductive deploy test feedback take num minute test specifically writing integration test take num minute outside mold always unit test whenever majority bug biggest time sink always involve jpa database another question similar followed advice wrapping unstable part jpa testing everything context question bad situation next step wrapping jpa imo question perhaps step answer question answer