background script responsible getting setting localstorage database content script must communicate background script send receive right send json contains command trying add database create json command attribute addobject another completed background script sends response back stating successful another use case would ask case would send back rather success fail get kind hacky start trying retrieve returned background script seems like probably simple design problem follow familiar people suggested future promise design problem found good example content script sendcommand chrome extension response figure response background script request command addobject db request id json stringify request success else request command var keystroke db request id keystroke