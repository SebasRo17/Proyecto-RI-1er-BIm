best practice calling language native function writing testable experimented little php come two methodology create wrapper native function mocking wrapper writing test using namespace magic calling native function without specifying global namespace afunction stead afunction writing stub given namespace testing result tested using stub instead native commonly used approach benefit shortcoming commonly used methodology test language native call