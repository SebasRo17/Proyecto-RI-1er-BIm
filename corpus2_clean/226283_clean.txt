basically one big gigantic table num num num record database field id block id record id unique block id unique contains 10k max record block id different record simplify job deal db api similar engine e new engine must thread safe fine grained locked block id improve concurrency e add block id asdf asdf num kilobyte max must concatenate already added record added block id need bigger 10mb worst case average 5mb e block id map block file done yet record file still able use api want know gain using flat file compared well postgresql database least specific scenario biggest requirement though return stupidly fast add operation considering caching memory mapping also want complicate asking already made solution kind scenario