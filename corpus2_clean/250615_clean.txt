tl dr given language polymorphism elegantly modify behavior leaf tree structure context programming application c microcontroller wondering would best way design flexible gui less menu basically input may come num different source built button board used user uart port used production team calibrate device shipping already mechanism using thread listen input button serial port post crude parser parser take action depending currently registered callback received also know menu must printed lcd screen serial port also using k ary tree represent hierarchy sub menu different option since menu defined yet allow simply add remove node supervisor make mind supported feature currently displayed menu leaf behavior quite simply left right move sibling back selects parent enter selects first child leaf enter activates deactivates modification left right increment decrement back cancel concern stuff could done bunch switch case ressources giving example clean gui less menu know input come action take menu must offer display menu since basically num option leaf everything elses move