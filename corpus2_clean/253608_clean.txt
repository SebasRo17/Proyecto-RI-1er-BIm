ok scenario third party component offer api communicating external system call commanding external system stuff done created wrapper interface mocked external system since real logic check call stuff external api procedural really test anything else method called dostuff b c dostuff2 e f dostuff3 g configure external system test integration test question done test mocked verifying parameter call mock contain correct parameter common way solve particular problem seems bit exhaustive test make sure present problem system getting big writing test assert present getting hand refactoring becoming real hard test failing change call third party