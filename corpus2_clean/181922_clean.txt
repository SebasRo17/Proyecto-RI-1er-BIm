image taken applying domain driven design pattern example c net enter image description diagram state pattern salesorder different state life time certain transition allowed different state abstract method inherited subclass consider subclass cancelled final state allow transition state override method throw exception violate liskov substitution principle since sublcass alter behavior parent changing abstract interface fix fixed