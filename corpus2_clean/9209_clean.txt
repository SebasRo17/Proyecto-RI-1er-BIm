mathematica provides function perform depth first traversal use traversal including scan count case replace position also standard evaluation order therefore function mapped map mapall evaluate depth first order quite direct expr scan print expr one scan type operation breadth first simply storing reordering output adequate change order expression visited scan property build output expression way e g map quite appropriate breadth first scan conserve memory