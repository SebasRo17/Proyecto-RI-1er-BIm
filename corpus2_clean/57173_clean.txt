want find minimum function r x p subject constraint w x p fixed parameter find minimum use function nminimize constraint w x p rather complicated numerical function depends function evolve x p numerical solution ordinary differential equation use loop find minimum different value constraint parameter problem following certain instant time kernel local quits without error warning loop finished error message kernel local quit exited course evaluation time kernel quits always different sometimes happens early sometimes rather late evaluate nminimize parameter kernel crashed also parameter beyond point work well without error first thought reason crash could lack memory monitor memory calculation everything look fine code simplified version problem definition constraint h x p x p x evolve xini pini time module x p hold x time p time ndsolve x p p x x xini p pini x p time maxsteps infinity w x numericq p numericq numericq h releasehold evolve x p h x p definition function minimized r x p x p x p fct first print nminimize r x p w x p x p method neldermead maxiterations loop different parameter dt tmin tmax maxt floor tmax tmin dt time table tmin dt n n maxt position table length time value table length time n n length time n tmp fct time n position n x p tmp value n tmp replace loop fct time get error using mathematica