following function block n diag snake diag n ceiling sqrt n snake alongdiag n diag diag n diag diag snake n snake alongdiag n snake diag n oeis n bitor snake n c compile n integer n compilationtarget c runtimeattributes listable runtimeoptions speed function seem compilable numerical computation however compiled function performs badly worse table x range x timing first c range x timing first x prepend func comp tableform enter image description fine perhaps function little overhead running c code costing much altering code fix help thing l compile n integer range n compilationtarget c runtimeoptions speed table x range x timing first l x timing first x prepend func comp tableform enter image description function approximately linear everything seems working expected algorithmic regard slow couple formula bitor going wrong