working open source test framework num codebase good test coverage problem area command entry point module began life short script calling domain model see call impl exit num test failed feel necessary test script time wrote project feature number small change logic file led become quite long import argparse import o import sys import impl init py call domain model import reporting sub package concerned writing import init def cmd parser argparse parser add argument capture action store dest capture default help disable capturing stdout test parser add argument v verbose action store dest verbose default help enable verbose progress reporting parser add argument teamcity action store dest teamcity default help enable teamcity test reporting parser add argument random action store dest shuffle default help disable test order parser add argument path action store default o getcwd help path test file directory default current directory parser parse teamcity teamcity version o environ reporter reporting teamcity sys stdout elif verbose reporter reporting cli sys stdout elif capture reporter reporting cli sys stdout reporting cli reporting cli sys stdout reporting cli sys stdout else reporter reporting cli sys stdout reporting cli reporting cli sys stdout reporting cli sys stdout reporter reporting shared reporter impl o path realpath path reporter shuffle reporter failed sys exit num sys exit num cmd know bug example possible capture stdout test running verbose mode lost confidence ability change module without breaking something want write test really experience test first development really know start test unit integration level mock mock reporting module mock impl try bring whole module test start add test add feature need refactor make testable addendum think part confusion due fact relatively thin layer top business logic make possible kick test runner command feeling confused constitutes service boundary particular mock