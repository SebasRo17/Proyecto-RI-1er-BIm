want randomly generate square matrix dimension n entry list startingentries also satisfying matrix matrix inverse identitymatrix n entry coming list endingentries working code case dimension last line keep generating error message like know also anyone think better way solving problem ear generate possible matrix mat candidate apply mat randomchoice startingentries get matrix invertible invertiblecandidates select candidate det identitymatrix far good want make sure inverted matrix correct entry find boolean subset function mathematica made subsetq x length intersection x length x test see inverse entry lying inside endingentries line keep failing know newercan select invertiblecandidates subsetq flatten inverse identitymatrix endingentries edit subsetq modified subsetq x length intersection deleteduplicates x deleteduplicates length deleteduplicates x edit error message getting deleteduplicates normal nonatomic expression expected position deleteduplicates nums intersection head head deleteduplicates list position expected inverse luc result inverse badly conditioned matrix may contain significant numerical error inverse sing matrix singular assuming first three error message formatting input subsetq appropriate list format know fix know getting singular error message