strictly related c system serf illustrate problem well assume generic template container std vector store unspecified number element heap element allocated deallocated via constructor destructor store element heap kind container however known compile time cannot used template parameter problem try use container accessing element inside container would require two pointer general worse performance element laid non ideal solution create separate manages memory directly assumed size throughout container would also exchange information storage containing however implement another kind container repeat process problem arises container oblivious storage requirement allocation container known requires fixed though known compile time number element issue could avoided feel though way communicate container definite size legal c signature container one potentially deduce faster allocation scheme possible bit like dependent type way allocated efficiently flattened container would general solution problem think something easily solved c feel free prove wrong would certainly like hear something language solve much simpler way perhaps sophisticated system