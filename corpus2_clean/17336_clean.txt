written function version take input list index j k output fully symmetric tensor function containing p g ij g ij understood symmetric leftrightarrow j myfunc tensorlist listq module rank length tensorlist perm j k r perm select permutation tensorlist rank signature return sum rank r r rank r factor sum product subscript p perm j j rank r product subscript g time perm k k k rank r rank max rank f r rank r rank example usage myfunc return f p myfunc j return f g ij f p p j etc problem function work element input list unique name like j k know modify accept list like j j example like myfunc return f g f p p yes know multiplying index g like keep hint please pointer ethic function construction would nice