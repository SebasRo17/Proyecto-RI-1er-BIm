disconcertingly discovered new v positionindex horribly slow using szabolcs clever gatherby inversion implement function comparison myposidx x thread x gatherby range length x x edit used associationthread defining function performs better myposidx x x associationthread gatherby range length x x timing taliesin beynon analysis refer original version change would minor check output match randomchoice b c myposidx positionindex true check performance version window randominteger myposidx timing first positionindex timing first good start system function get worse randominteger myposidx timing first positionindex timing first fewer unique element positionindex actually get slower trend continue randominteger myposidx timing first positionindex timing first somewhere someone face palm right bad get randominteger myposidx timing first positionindex timing first ouch new record poor computational complexity system function