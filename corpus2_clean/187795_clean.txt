project working send message widget message queue serializing onto queue xml xml schema contains tag property common type widget message widget command destination also contain arbitrarily sized list key pair allow storage property relevant specific widget message encapsulates class provide serialization xml made class encapsulate specific message example foo widget bar widget instance static converting family message inherits abstract widget e g turn inherits store common message property protected method used subclass conversion none class inherit since want inherit key collection property associated method hence need conversion rather simple casting like simplicity api e g msg fact use protected method base share functionality static method expose make wonder ought separate two involved similar hand thought part point oop group method together avoid dumb object right idea adding conversion method object functionality extracted another update think detail current attempt design explain clearly enough problem trying solve summary generic dto strongly typed property collection key pair store custom want specialized dto class set custom store generic dto except key pair replaced strongly typed property best design converting two type dto