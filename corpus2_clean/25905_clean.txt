able use self defined using module loop piecewise function fit data seems problem define pure function would like learn define pure function following example using module loop please help let consider problem data self defined piecewise function f z go exactly data point linearmodelfit fitting data f z return value parameter equal disclaimer return constant instead basically understand f z provided use constant fit data however second part following example define function g z equal f z using piecewise work perfectly linearmodefit return would like write f z using module loop work linearmodelfit way g z x table x random x random x data transpose x part self defined function f z fpiecewise x xlist ylist module length xlist x xlist break return ylist f z fpiecewise z x linearmodelfit data f z z listplot x x transpose data joined true part part piecewise defined function g z x join x g z piecewise table x z x length x linearmodelfit data g z z listplot x x transpose data joined true part