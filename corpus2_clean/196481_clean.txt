writing inputstream process stream containing trailer final n byte stream piece must handled separately returned read method maintain internal byte length n read byte underlying stream popped front buffer service request read implementing read simple enough call underlying stream shift byte num pop result caller implementing read byte b challenging requires shifting large number byte n byte buffer whilst popping collating byte front essentially sliding window buffer always containing last n byte underlying stream get feeling inventing wheel start coding scratch anyone suggest overlooked existing inputstream queue implementation would well suited task