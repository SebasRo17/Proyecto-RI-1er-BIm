like add extension filename file extension otherwise leaving given filename particular absolute filename stay absolute relative filename stay relative example suppose piece want insert home dir foo txt becomes home dir foo txt xyz csv becomes xyz csv foobar becomes foobar append case extension expect dealing filename already multiple extension case desired behavior nomnom tar gz becomes nomnom tar gz ensure filename end slash obvious way concatenating directory name file base name new piece extension insertpiece fn piece filenamejoin directoryname fn stringjoin filebasename fn piece fileextension fn corner case missed work efficient elegant way