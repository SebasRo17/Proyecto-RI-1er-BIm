code fragment looks reasonable logic valid something appears bit deep pixmap doesnt mean every bit plane contains data try plane