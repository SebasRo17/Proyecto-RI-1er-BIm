I am looking for a way to expand a complicate expression like the follow               (A o B + C o (DxE))*(D o (ExF) - ExA + A)      Here o and x are the operator. I want to expand it so to have it simplified as $$\sum_{n,m} G(f_n, g_m)$$ where G stands for operation (either o or x) of any variable $f_n$ and $g_m$, for example, $G(A, B)$ could be $A \,o\, B$ or $A \, \times\, B$. Also, o is commutable but x not, i.e. A o B = B o A, but A x B = - B x A. I am looking for a way to deal with any operator but up to now, for simplification, we could take o and x as dot product and cross product for real vector. After expanding the expression in above form, I would like to regulate each term so the number (coefficient) placed ahead of the vector. For example,               (p+aq)x(p+bq) => pxp + px(bq) + (aq)xp + (aq)x(bq) => pxp + b*(pxq) + a*(qxp) + (a*b)*(qxq)      where p and q are vectors, and a, b are numbers.