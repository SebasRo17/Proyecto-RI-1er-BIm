I have a function _num_ with two variables, _matf_ and _matg_. How can I combine the _last two_ lines of code below into one? The code is aimed to find out the maxiaml count _bel_ when we give each $i3 = 1,\cdots,5$ a value $f[[i3]]$ and each $i4 = 1,\cdots,5$ a value $g[[i4]]$. How can I speed up this code? Any help or suggestions will be appreciated.                FG = Tuples[{0, 1, 2, 3}, 5];      num[matf_, matg_] :=         Module[{f = matf, g = matg},           bel = 0;          For[i3 = 1, i3 <= 5, i3++,             For[i4 = 1, i4 <= 5, i4++,               If[Mod[IntegerPart[(i3 + i4)/2 - 1], 5] == Mod[f[[i3]] + g[[i4]], 5], bel++];            ];          ];          bel        ];     num2[f_] := Max[num[f, #] & /@ FG]     Max[num2[#] & /@ FG]      Here is an example to explain what does _num_ do.               Bell = {};     f = {0, 0, 1, 3, 4};     g = {1, 3, 2, 4, 1};     For[i3 = 1, i3 <= 5, i3++,        For[i4 = 1, i4 <= 5, i4++,         If[Mod[IntegerPart[(i3 + i4)/2 - 1], 5] ==         Mod[f[[i3]] + g[[i4]], 5],        AppendTo[Bell, {f[[i3]], g[[i4]], i3, i4}]];];];     Bell     Bell // Length      The output is                 {{4, 3, 5, 2}, {4, 4, 5, 4}}       2      which means that if we assign each $i3 = 1,\cdots,5$ the i3th element in _f={0, 0, 1, 3, 4}_ and $i4 = 1,\cdots,5$ the i4th element in _g={1, 3, 2, 4, 1}_ , then there is only $i3=5$ (the correspondig value is 4) $i4=2$ (the correspondig value is 2) or $i3=5$ (the correspondig value is 4) $i4=4$ (the correspondig value is 4) satisfy the condition _Mod[IntegerPart[(i3 + i4)/2 - 1], 5] == Mod[f[[i3]] + g[[i4]], 5]_.