Using NDSolve I want to solve a differential equation till a quantity which is a function of the dependent variables reaches a certain value. My functions and criteria are complicated, but I am able to reproduce the error with a simple DE:               a[t_] := x[t]^2     NDSolve[{x'[t] == Sin[t]^2, x[0] == 0,         WhenEvent[a[t] == 1, "StopIntegration"]}, {x}, {t, 0, 10}]      Here is the error message I get: > NDSolve::nbnum1: "The function value x[0.00205297]^2==1 is not True or False > when the arguments are {0.00205297,5.40788*10^-9,4.21468*10^-6}." Any Ideas would be great