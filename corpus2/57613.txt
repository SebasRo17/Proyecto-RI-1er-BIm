I need to "index" a vector according to the first occurence of its distinct elements. I have written               index[list_] :=      Module[{x = list, p},       p = Flatten /@ Map[Position[x, #] &, DeleteDuplicates@x];       Table[x[[p[[i]]]] = i, {i, 1, Length@p}];       x]      which gives the expected result:               vec= {1, 4, 4, 8, 7, 7, 4};     index @ vec      > {1, 2, 2, 3, 4, 4, 2} **(1)** How could a more functional / efficient solution look like? **(2)** How could such a solution be extended to work with matrices? ad (2)               mat = {{1, 4}, {2, 7}, {7, 2}, {9, 4}};      should give > {{1, 2}, {3, 4}, {4, 3}, {5, 2}}