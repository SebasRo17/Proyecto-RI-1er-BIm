I have a method that looks like this:               def foobar(mock=False, **kwargs):         # ... snipped      `foobar` actually makes several calls to Amazon S3 and returns a composed result. In order to make this testable, I introduced the `mock` parameter to turn off making live network connections. It feels like a code smell for me but testability is also very important. What else can I do if I want to do away with the parameter ?