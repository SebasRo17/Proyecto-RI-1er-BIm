You know, NDsolve coupled with Piecewise can be used to solve a series of discontinuous differential equations. But what if one of the function is different? For example: $$z''(t)=\begin{cases}x(t)-(1+y(t)), & \text{if } x>(1+y) \\\ \\\ \\\ x(t)+(1+y(t)), & \text{if } x<-(1+y) \end{cases} $$ $$\rm{and}$$ $$z'(t)=0, \rm{if } |x|<(1+y) $$ I tried something like below               xyz = First@NDSolve[{x''[t] == -2.25 Cos[1.5 t] - x[t] - x'[t],      x[0] == 0, x'[0] == 0,      y''[t] == -1.125 Cos[1.5 t] - 4 y[t] - y'[t],      y[0] == 0, y'[0] == 0,      z''[t] == Piecewise[{         {x[t] - (1 + y[t]), x[t] > 1 + y[t]},          {0, Abs[x[t]] <= 1 + y[t]},          {x[t] + (1 + y[t]), x[t] < -1 - y[t]}}],      z[0] == 0},      {x, y, z}, {t, 0, 30}];      but have no idea how to correctly incorporate $z'(t)$ condition.