I am in the middle of creating a Bundle for PHP application based on Symfony 2. I want the bundle to be clear and good designed, so I constantly move and refactor code, rename methods, reorder classes, move them to other folders, add some factories and adapters, proxies, and follow other oop design concepts. I'm thinking if I should design UML diagram first, then start to work with IDE. What is the best practice for designing good architecture? When I start with draw of UML class diagrams before, then after coding, even with empty methods and tests first, I stop following the diagram I drew before, because I found it not matching what I need. Can you share good practices for designing architecture for a libraries? I'm not talking about model (if so I could follow DDD).