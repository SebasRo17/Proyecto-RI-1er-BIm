s[a_, b_] := NDSolve[{y''[x] == y[x] Cos[x + y[x]], y[0] == a, y'[0] == 1}, y, {x,0, b}]      I need to find the minimal of $\int _1^by[x]^2$ in the region $-1<a<1$ and $b>1$, and express $a$ in terms of $b$, what I am doing is like:               w[a_,b_]:=First[NIntegrate[Evaluate[y[x]^2 /. s[a, b]], {x, 0, b}]]     j[a_,b_]:=D[w[a,b],a]     h[b_]:=a/.FindRoot[j[a,b]==0,{a,0}]      I am too naive, does anyone have any idea? thanks AS Michael E2 suggests using ND, so instead of               j[a_,b_]:=D[w[a,b],a]      I change it as:               j[d_,b_]:=ND[w[a,b],{a,1},d]      but when I enter j[1,1] as a check, I receive a warning instead of the a number. So I tried b.gatessucks's suggestion, using NMinimize,                   w[b_]:=NMinimize[NIntegrate[Evaluate[y[x]^2 /. s[a, b]], {x, 0, b}],{a}]      Unfortunately, w[1] does not give a number. Anyway, thanks for your help. and thanks ruebenko