The problem is $$ x''(t)=F(t) - kx'(t) \\\ x'(0)=x(0)=0$$ with the additional constraints $$ 0 < x(t) <a \\\ 0 < x'(t) <b $$ where $F(t)$ is a known function and $a,b,k$ are given. At the moment I solve such problems with the help of _`WhenEvent[...]`_. **Example** :               First@First@NDSolve[{       x''[t] == 10 Sin[0.1 t] - 0.1 x'[t], x[0] == 0,        x'[0] == 0, WhenEvent[x[t] > 400, x[t] -> 399],        WhenEvent[x'[t] > 40, x'[t] -> 39],        WhenEvent[x[t] < 0, x[t] -> 1],        WhenEvent[x'[t] < -40, x'[t] -> -39]},       x, {t, 0, 200},       MaxSteps -> 50000];     Plot[{x[t] /. %, 10 x'[t] /. %}, {t, 0, 200}, PlotRange -> All,       PlotLegends -> {"x[t]", "x'[t]"}, ImageSize -> 700]      ![Plot of x, x'](http://i.stack.imgur.com/Mj9fD.png) What is the proper way to solve this type of problem?