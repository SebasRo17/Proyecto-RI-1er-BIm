In this answer I needed to remove contiguous zero-valued cols and rows from a matrix, _leaving only two of them in place_ , no matter what the original number was. I made up this code:               m = RandomVariate[BinomialDistribution[1, 10^-3], {400, 400}];      rule = {h__, {0 ..}, w : {0 ..}, {0 ..}, t__} -> {h, w, w, t};     mClean = Transpose[Transpose[m //. rule] //. rule];     Dimensions@mClean      But it is way too slow.   I'm pretty sure this code can be enhanced. Any better ideas?