I have been wrapping my head around this for a while now and I have not found a solution so far. I want to work with an arbitrary number of variables in mathematica and use some built in functions. To make things more specific for starters I want to do the following: Define a sum with n summands each containing a new variable x[i] (in the i-th summand):               sum[n_] = Sum[i*x[i], {i, 1, n}]      Then I want to differentiate the expression with respect to some x[i] like:               D[sum[n],x[2]]      Mathematica returns 0 instead of 2. If I supply a specific n like:               D[sum[2],x[2]]      everything works fine. I thought about using Assumptions for n, but with no success so far. How can I do that right?