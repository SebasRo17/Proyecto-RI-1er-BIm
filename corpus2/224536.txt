What is the proper way to handle determining the amount to return to a customer when dealing with coupons and discounts applied to receipts? **[Scenario A]** A receipt contains items each with their own price. A returned item would give back the amount spent for that item.               ItemA $25     ItemB $75     =====     Total: $100          a) Return ItemA: $25     b) Return ItemB: $75     c) Return ItemA, ItemB: $100      **[Scenario B]** What is the proper way to handle calculating the amount to return per item when we include a global discount or coupon applied to the entire receipt?               $10 global coupon for every $100 spent          ItemA $25     ItemB $75     ItemC $120     ItemD $15     =====     Subtotal: $220     Coupons: $20     Total: $200          Return ItemA: $?     Return ItemB: $?     Return ItemC: $?     Return ItemB, ItemC, ItemD: $?      **[Scenario C]** Coupons tied directly to items on receipts make it easy to calculate the amount to return per item like in Scenario A.               $10 coupon for ItemB only          ItemA $25     ItemB $75     --Coupon: $10     ItemC $120     ItemD $15     =====     Subtotal: $220     Coupons: $10     Total: $210          Return ItemA: $25     Return ItemB: $75 - $10 = $65     Return ItemC: $120     Return ItemB, ItemC, ItemD: ($75 - $10 = $65) + $120 + $15 = $200      **Things to think about:**   * Multiple returns per receipt (e.g. Monday return ItemA, Tuesday return ItemB)   * Global discounts - applied to entire receipt   * Item discounts - applied only to specific items   * Coupons that give discount for minimum amount spent - what if a returning part of a receipt negates the minimum requirements?