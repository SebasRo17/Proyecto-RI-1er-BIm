I'm trying to get the variational derivative $\delta E$ respect to $\Phi$ of this functional $$ E[\Phi] = \int d^3r\ \left[ -\frac{\hbar^2}{2m}\nabla^2\Phi + V(\vec{r})\Phi^*\Phi + \frac{1}{2}g\Phi^{*2}\Phi^2 \right] $$ I've to check if my hand-calculus are corrects. I've defined the differential operator $H$ in this way               H[x_, y_, z_] = -(\[HBar]^2/(2 m)) Laplacian[#, {x, y, z}] + U[x, y, z] Abs[#]^2 + g/2 Abs[#]^4 &      and then i tried to calculate the variational derivative throw               g[x_, y_, z_] = H[x, y, z][f[x, y, z]]     VariationalD[g, f[x, y, z], {x, y, z}]      But the result is 0. Why? Trying to get the Euler Equation i get an error               EulerEquations[g, f[x, y, z], {x, y, z}]     EulerEquations::args: EulerEquations takes a single integrand, a function or list of functions, and a list of variables as input. >>