% MATLAB code     A=reshape(1:16,4,[])'     k=logical([1 0 0 1; 0 1 1 0; 0 1 1 0;1 0 0 1 ])     A(k)=5-A(k)     %{      4     2     3     1      5    -1    -2     8      9    -5    -6    12     -8    14    15   -11     %}      I need _Mathematica_ code that works like the MATLAB code above. Is there a easy way do this?               A = Range[16]~Partition~4     k = {{1, 0, 0, 1}, {0, 1, 1, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}}     A[[k]] = 5 - A[[k]]      **Updated** :               fA = Flatten[A];     p = Flatten@Position[Flatten@k, 1];     fA[[p]] = 5 - fA[[p]];     Partition[fA, 4]          (*{{4, 2, 3, 1}, {5, -1, -2, 8}, {9, -5, -6, 12}, {-8, 14, 15, -11}}*)