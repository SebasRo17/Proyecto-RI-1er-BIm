I am in the process of trying to use Mathematica to find the coefficients of transmission and reflection for the wavefunction of a beam of particles tunnelling across any number of identical potential barriers. I have got to the stage where I am able to generate the equations for n numbers of barriers, but I am not able to equate the appropriate equations to each other to solve them for the coefficients. The module I have written to generate the relavant equations is:               GeneratePhiEqs[N_] :=         Module[{inceqs, diffinceqs, bareqs, diffbareqs, finaleq, difffinaleq,         IncidentPhi, BarrierPhi, FinalTransmittedPhi, phieqs},          IncidentPhi[x_, n_] := T[n]*E^(I*k*x) + R[n]*E^(-I*k*x);         BarrierPhi[x_, n_] := A[n]*E^(r*x) + B[n]*E^(-r*x);         FinalTransmittedPhi[x_, n_] := T[n]*E^(I*k*x); T[0] = 1;              inceqs = Table[Phi[j] = {IncidentPhi[x, j]}, {j, 0, N}];         diffinceqs =          Table[Phi[N + j] = {D[IncidentPhi[x, j], x]}, {j, 0, N - 1}];         bareqs = Table[Phi[2 N + j - 1] = {BarrierPhi[x, j]}, {j, N}];         diffbareqs =          Table[Phi[3 N + j - 1] = {D[BarrierPhi[x, j], x]}, {j, N}];         finaleq = Phi[4 N] = FinalTransmittedPhi[ x, N];         difffinaleq = Phi[4 N + 1] = D[FinalTransmittedPhi[x, N], x];         phieqs = {inceqs, diffinceqs, bareqs, diffbareqs, finaleq,          difffinaleq}; phieqs]      The module I have written (or what it looks like so far) to equate the relevant equations is:               SolvePhiEqs[number_] :=          Module[{eqs, simeqs}, eqs = GeneratePhiEqs[number];          simeqs = Table[{Phi[j] /. phieqs == Phi[2*number + j] /.          phieqs}, {j, 2*number - 1}]; simeqs]       Basically, the equations that I generated with the first module will not substitute in correctly, they just remain isolated from each other surrounded by curly brackets. Any suggestions would be much appreciated! Thanks.