When writing unit tests, should I specify the query that will be performed for interacting with the database? I can see both sides of this. On one hand, I want to make sure that the query that I specify is being performed. But I can be making the test more brittle due to the formatting of the query. **EDIT:** Basically the code would be a mapper object that interacts with the db layer. But I am wondering how specific do I need to be in my interactions with a Db object. **Edit:** As I want to mock any external dependencies to my objects when I am mocking my Database connection. Should I specify the query that is going to be performed. For example:               testGettingUsers() {         $mockDb = $this->getMockBuilder('My_DB_Connection')              ->setMethods(array('query'))              ->getMock();              $mockDb->expects($this->once())              ->method('query')              ->with('SELECT id, name FROM USERS WHERE name = foo')              ->will($this->returnValue($dbReturn));      Here I have specified my query as the parameter that I am going to call my DB connection with. Is that necessary?