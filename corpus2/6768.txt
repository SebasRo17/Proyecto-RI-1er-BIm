I am trying to represent the following function definition in Mathematica: $$\begin{align*} f(1)&=1 \\\ f(2n)&= \begin{cases}f(n) & \text{if}\space n\equiv0\pmod{2} \\\ 2f(n) & \text{if}\space n\equiv1\pmod{2}\end{cases} \\\ f(2n+1)&=\begin{cases}2f(n)+1 & \text{if}\space n\equiv0\pmod{2} \\\ f(n) & \text{if}\space n\equiv1\pmod{2}\end{cases} \end{align*}$$ I have tried both the following definitions, but both of them return `f[2011]` as their output when I input `f[2011]` into the kernel. Using _if-statements_ :               f[1] := 1     f[2 n_] := If[Mod[n, 2] == 0, f[n], 2 f[n]]     f[2 n_ + 1] := If[Mod[n, 2] == 0, 2 f[n] + 1, f[n]]      And using _switch-statements_ :               f[1] := 1     f[2 n_] := Switch[Mod[n, 2], 0, Evaluate[f[n]], 1, 2 Evaluate[f[n]]]     f[2 n_ + 1] := Switch[Mod[n, 2], 0, 2 Evaluate[f[n]] + 1, 1, Evaluate[f[n]]]      Neither of these definitions seem to give me what I'm after, so I'd appreciate any help.